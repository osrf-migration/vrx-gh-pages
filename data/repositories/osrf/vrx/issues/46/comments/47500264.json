{"links": {"self": {"href": "data/repositories/osrf/vrx/issues/46/comments/47500264.json"}, "html": {"href": "#!/osrf/vrx/issues/46#comment-47500264"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/vrx/issues/46.json"}}, "type": "issue", "id": 46, "repository": {"links": {"self": {"href": "data/repositories/osrf/vrx.json"}, "html": {"href": "#!/osrf/vrx"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e278ca38-7edb-4e62-b785-46dff5617d98}ts=2274605"}}, "type": "repository", "name": "vrx", "full_name": "osrf/vrx", "uuid": "{e278ca38-7edb-4e62-b785-46dff5617d98}"}, "title": "Unable to build and run the VMRC Image"}, "content": {"raw": "Here is the output:\n\n\n\n```\n#!python\n\n#!/usr/bin/env bash\n\n#\n# Copyright (C) 2018 Open Source Robotics Foundation\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n#\n#\n\n# Builds a Docker image.\n\nif [ $# -eq 0 ]\nthen\n    echo \"Usage: $0 directory-name\"\n    exit 1\nfi\n\n# Get path to current directory\nDIR=\"$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" && pwd )\"\n\nif [ ! -d $DIR/$1 ]\nthen\n  echo \"image-name must be a directory in the same folder as this script\"\n  exit 2\nfi\n\nuser_id=$(id -u)\nimage_name=$1\nimage_plus_tag=$image_name:$(date +%Y_%b_%d_%H%M)\n\ndocker build --rm -t $image_plus_tag --build-arg user_id=$user_id $DIR/$image_name\ndocker tag $image_plus_tag $image_name:latest\n\necho \"Built $image_plus_tag and tagged as $image_name:latest\"\n\n```", "markup": "markdown", "html": "<p>Here is the output:</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"ch\">#!/usr/bin/env bash</span>\n\n<span class=\"c1\">#</span>\n<span class=\"c1\"># Copyright (C) 2018 Open Source Robotics Foundation</span>\n<span class=\"c1\">#</span>\n<span class=\"c1\"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>\n<span class=\"c1\"># you may not use this file except in compliance with the License.</span>\n<span class=\"c1\"># You may obtain a copy of the License at</span>\n<span class=\"c1\">#</span>\n<span class=\"c1\">#     http://www.apache.org/licenses/LICENSE-2.0</span>\n<span class=\"c1\">#</span>\n<span class=\"c1\"># Unless required by applicable law or agreed to in writing, software</span>\n<span class=\"c1\"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>\n<span class=\"c1\"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>\n<span class=\"c1\"># See the License for the specific language governing permissions and</span>\n<span class=\"c1\"># limitations under the License.</span>\n<span class=\"c1\">#</span>\n<span class=\"c1\">#</span>\n\n<span class=\"c1\"># Builds a Docker image.</span>\n\n<span class=\"k\">if</span> <span class=\"p\">[</span> <span class=\"err\">$</span><span class=\"c1\"># -eq 0 ]</span>\n<span class=\"n\">then</span>\n    <span class=\"n\">echo</span> <span class=\"s2\">&quot;Usage: $0 directory-name&quot;</span>\n    <span class=\"nb\">exit</span> <span class=\"mi\">1</span>\n<span class=\"n\">fi</span>\n\n<span class=\"c1\"># Get path to current directory</span>\n<span class=\"n\">DIR</span><span class=\"o\">=</span><span class=\"s2\">&quot;$( cd &quot;</span><span class=\"err\">$</span><span class=\"p\">(</span> <span class=\"n\">dirname</span> <span class=\"s2\">&quot;${BASH_SOURCE[0]}&quot;</span> <span class=\"p\">)</span><span class=\"s2\">&quot; &amp;&amp; pwd )&quot;</span>\n\n<span class=\"k\">if</span> <span class=\"p\">[</span> <span class=\"err\">!</span> <span class=\"o\">-</span><span class=\"n\">d</span> <span class=\"err\">$</span><span class=\"n\">DIR</span><span class=\"o\">/</span><span class=\"err\">$</span><span class=\"mi\">1</span> <span class=\"p\">]</span>\n<span class=\"n\">then</span>\n  <span class=\"n\">echo</span> <span class=\"s2\">&quot;image-name must be a directory in the same folder as this script&quot;</span>\n  <span class=\"nb\">exit</span> <span class=\"mi\">2</span>\n<span class=\"n\">fi</span>\n\n<span class=\"n\">user_id</span><span class=\"o\">=</span><span class=\"err\">$</span><span class=\"p\">(</span><span class=\"nb\">id</span> <span class=\"o\">-</span><span class=\"n\">u</span><span class=\"p\">)</span>\n<span class=\"n\">image_name</span><span class=\"o\">=</span><span class=\"err\">$</span><span class=\"mi\">1</span>\n<span class=\"n\">image_plus_tag</span><span class=\"o\">=</span><span class=\"err\">$</span><span class=\"n\">image_name</span><span class=\"p\">:</span><span class=\"err\">$</span><span class=\"p\">(</span><span class=\"n\">date</span> <span class=\"o\">+%</span><span class=\"n\">Y_</span><span class=\"o\">%</span><span class=\"n\">b_</span><span class=\"o\">%</span><span class=\"n\">d_</span><span class=\"o\">%</span><span class=\"n\">H</span><span class=\"o\">%</span><span class=\"n\">M</span><span class=\"p\">)</span>\n\n<span class=\"n\">docker</span> <span class=\"n\">build</span> <span class=\"o\">--</span><span class=\"n\">rm</span> <span class=\"o\">-</span><span class=\"n\">t</span> <span class=\"err\">$</span><span class=\"n\">image_plus_tag</span> <span class=\"o\">--</span><span class=\"n\">build</span><span class=\"o\">-</span><span class=\"n\">arg</span> <span class=\"n\">user_id</span><span class=\"o\">=</span><span class=\"err\">$</span><span class=\"n\">user_id</span> <span class=\"err\">$</span><span class=\"n\">DIR</span><span class=\"o\">/</span><span class=\"err\">$</span><span class=\"n\">image_name</span>\n<span class=\"n\">docker</span> <span class=\"n\">tag</span> <span class=\"err\">$</span><span class=\"n\">image_plus_tag</span> <span class=\"err\">$</span><span class=\"n\">image_name</span><span class=\"p\">:</span><span class=\"n\">latest</span>\n\n<span class=\"n\">echo</span> <span class=\"s2\">&quot;Built $image_plus_tag and tagged as $image_name:latest&quot;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2018-08-29T01:51:35.765076+00:00", "user": {"display_name": "Arthur Hsieh", "uuid": "{85e83046-a07b-4581-a75e-a13bcc360542}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B85e83046-a07b-4581-a75e-a13bcc360542%7D"}, "html": {"href": "https://bitbucket.org/%7B85e83046-a07b-4581-a75e-a13bcc360542%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a7825921e758656e9de84b5bc2273e5ed=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsAH-6.png"}}, "nickname": "arthur960304", "type": "user", "account_id": "5b5877373eb9962cd052914f"}, "updated_on": null, "type": "issue_comment", "id": 47500264}