{"links": {"self": {"href": "data/repositories/osrf/vrx/issues/137/comments/53820828.json"}, "html": {"href": "#!/osrf/vrx/issues/137#comment-53820828"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/vrx/issues/137.json"}}, "type": "issue", "id": 137, "repository": {"links": {"self": {"href": "data/repositories/osrf/vrx.json"}, "html": {"href": "#!/osrf/vrx"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e278ca38-7edb-4e62-b785-46dff5617d98}ts=2274605"}}, "type": "repository", "name": "vrx", "full_name": "osrf/vrx", "uuid": "{e278ca38-7edb-4e62-b785-46dff5617d98}"}, "title": "Consider differences in heading sensor plugin options: IMU and GPS-based"}, "content": {"raw": "Hi guys. I had some questions regarding the velocity coordinate frame and the heading coordinate frame published by the GPS and GPS-aided IMU with regard to calculating the surge \\(longitudinal\\) and sway \\(lateral\\) velocity in the WAMV body frame. Would these be the steps to do it?\n\n1. get vel\\_y\\_fix from fix velocity topic\n2. vel\\_x = -1\\* vel\\_y\\_fix  \\(this is from issue #64: [#!/osrf/vrx/issues/64/possible-frame-error-in-simulated-gps](#!/osrf/vrx/issues/64/possible-frame-error-in-simulated-gps)\\)\n3. calculate yaw from IMU quaternion from imu data topic\n4. multiply vel\\_x  by cosine of the yaw angle to get surge\\(longitudinal\\) velocity in the body frame \n5. multiply vel\\_x by sin of the yaw angle to get sway\\(lateral\\) velocity in the body frame\n\nCan you please let me know if there are any errors in my calculation or if there is a better way to get velocities in the body frame from the current VRX setup?", "markup": "markdown", "html": "<p>Hi guys. I had some questions regarding the velocity coordinate frame and the heading coordinate frame published by the GPS and GPS-aided IMU with regard to calculating the surge (longitudinal) and sway (lateral) velocity in the WAMV body frame. Would these be the steps to do it?</p>\n<ol>\n<li>get vel_y_fix from fix velocity topic</li>\n<li>vel_x = -1* vel_y_fix  (this is from issue <a href=\"#!/osrf/vrx/issues/64/possible-frame-error-in-simulated-gps\" rel=\"nofollow\" title=\"Possible frame error in simulated GPS velocity generation\" class=\"ap-connect-link\"><s>#64</s></a>: <a data-is-external-link=\"true\" href=\"#!/osrf/vrx/issues/64/possible-frame-error-in-simulated-gps\" rel=\"nofollow\">#!/osrf/vrx/issues/64/possible-frame-error-in-simulated-gps</a>)</li>\n<li>calculate yaw from IMU quaternion from imu data topic</li>\n<li>multiply vel_x  by cosine of the yaw angle to get surge(longitudinal) velocity in the body frame </li>\n<li>multiply vel_x by sin of the yaw angle to get sway(lateral) velocity in the body frame</li>\n</ol>\n<p>Can you please let me know if there are any errors in my calculation or if there is a better way to get velocities in the body frame from the current VRX setup?</p>", "type": "rendered"}, "created_on": "2019-09-09T15:29:25.742385+00:00", "user": {"display_name": "Rahul Rameshbabu", "uuid": "{56ca272e-3a85-4005-ab7d-9c9b35da64be}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B56ca272e-3a85-4005-ab7d-9c9b35da64be%7D"}, "html": {"href": "https://bitbucket.org/%7B56ca272e-3a85-4005-ab7d-9c9b35da64be%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/3713a227f077029072fa3a4cc7803af0d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsRR-1.png"}}, "nickname": "Rahul Rameshbabu", "type": "user", "account_id": "5d7667778b0e290c45a9f8a6"}, "updated_on": null, "type": "issue_comment", "id": 53820828}