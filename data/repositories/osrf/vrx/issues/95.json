{"priority": "blocker", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/vrx.json"}, "html": {"href": "#!/osrf/vrx"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e278ca38-7edb-4e62-b785-46dff5617d98}ts=2274605"}}, "type": "repository", "name": "vrx", "full_name": "osrf/vrx", "uuid": "{e278ca38-7edb-4e62-b785-46dff5617d98}"}, "links": {"attachments": {"href": "data/repositories/osrf/vrx/issues/95/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/vrx/issues/95.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/vrx/issues/95/watch"}, "comments": {"href": "data/repositories/osrf/vrx/issues/95/comments_page=1.json"}, "html": {"href": "#!/osrf/vrx/issues/95/gazebo-black-screen-when-running"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/vrx/issues/95/vote"}}, "reporter": {"display_name": "Rumman Waqar", "uuid": "{375366ee-150c-4843-9449-cbec61c538ca}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B375366ee-150c-4843-9449-cbec61c538ca%7D"}, "html": {"href": "https://bitbucket.org/%7B375366ee-150c-4843-9449-cbec61c538ca%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5a8b94bb21870439aa9167ef/026c5cb4-b99d-4aad-90d7-62d45fe41395/128"}}, "nickname": "rumman05", "type": "user", "account_id": "5a8b94bb21870439aa9167ef"}, "title": "Gazebo black screen when running sandisland scene", "component": null, "votes": 0, "watches": 1, "content": {"raw": "![](https://lh3.googleusercontent.com/ViRAVnX8F1pLc5goTZ-2bFzb6FKICK-4ENKoXvIGwKSnQz_kKPFbyT6-rWUhxiLdPQD39cVSKlJ7wy4HeKpI59Z_gRrRtoFMSdMDTdm5tO9aPnR-hmpRoqDnLqEeKnKnCSEaM3mU)\r\nEvery time I launch VRX scenes _\\(on latest default\\)_ in gazebo I get this black screen instead _\\(I have attached detailed logs\\)._ I tried to use a clean clone of the repo and the error persists. Other gazebo scenes \\(not from VRX repo\\) run fine. Removing the last two ground stations from sandisland.xacro seems to fix the problem.\r\n\r\nVerbose launch gives the following output:\r\n\r\n```\r\nVerbose launch gives the following output:\r\nprocess[gazebo-1]: started with pid [10793]\r\nprocess[gazebo_gui-2]: started with pid [10798]\r\nprocess[spawn_model-3]: started with pid [10803]\r\nGazebo multi-robot simulator, version 9.0.0\r\nCopyright (C) 2012 Open Source Robotics Foundation.\r\nReleased under the Apache 2 License.\r\nhttp://gazebosim.org\r\n\r\nGazebo multi-robot simulator, version 9.0.0\r\nCopyright (C) 2012 Open Source Robotics Foundation.\r\nReleased under the Apache 2 License.\r\nhttp://gazebosim.org\r\n\r\n[Wrn] [GuiIface.cc:199] g/gui-plugin is really loading a SystemPlugin. To load a GUI plugin please use --gui-client-plugin \r\n[ INFO] [1558974371.814151451]: Finished loading Gazebo ROS API Plugin.\r\n[ INFO] [1558974371.814979692]: waitForService: Service [/gazebo/set_physics_properties] has not been advertised, waiting...\r\n[Msg] Waiting for master.\r\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\r\n[Msg] Publicized address: 172.31.54.124\r\n[ INFO] [1558974371.858777536]: Finished loading Gazebo ROS API Plugin.\r\n[ INFO] [1558974371.859882245]: waitForService: Service [/gazebo_gui/set_physics_properties] has not been advertised, waiting...\r\n[Msg] Waiting for master.\r\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\r\n[Msg] Publicized address: 172.31.54.124\r\nWarning [parser.cc:759] XML Attribute[xmlns:xacro] in element[sdf] not defined in SDF, ignoring.\r\nWarning [parser.cc:759] XML Attribute[xmlns:xacro] in element[world] not defined in SDF, ignoring.\r\n[Err] [Node.cc:105] No namespace found\r\n[Err] [Node.cc:105] No namespace found\r\n[Msg] Found that SDF has at least one link element, looking at each link...\r\n[Msg] Looking for name attribute in link number 0, which has 0 attributes\r\n[Msg] Found link name in SDF [gate_start_red::link]\r\n[Msg] Found that SDF has at least one link element, looking at each link...\r\n[Msg] Looking for name attribute in link number 0, which has 0 attributes\r\n[Msg] Found link name in SDF [gate_start_green::link]\r\n[Msg] Found that SDF has at least one link element, looking at each link...\r\n[Msg] Looking for name attribute in link number 0, which has 0 attributes\r\n[Msg] Found link name in SDF [gate_end_red::link]\r\n[Msg] Found that SDF has at least one link element, looking at each link...\r\n[Msg] Looking for name attribute in link number 0, which has 0 attributes\r\n[Msg] Found link name in SDF [gate_end_green::link]\r\n[Msg] Found that SDF has at least one link element, looking at each link...\r\n[Msg] Looking for name attribute in link number 0, which has 0 attributes\r\n[Msg] Found link name in SDF [base_link]\r\n[Msg] Found that SDF has at least one link element, looking at each link...\r\n[Msg] Looking for name attribute in link number 0, which has 0 attributes\r\n[Msg] Found link name in SDF [base_gate::red_buoy::link]\r\n[Msg] Found that SDF has at least one link element, looking at each link...\r\n[Msg] Looking for name attribute in link number 0, which has 1 attributes\r\n[Msg] Found link name in SDF [base_gate::white_buoy_left::link]\r\n[Msg] Found that SDF has at least one link element, looking at each link...\r\n[Msg] Looking for name attribute in link number 0, which has 1 attributes\r\n[Msg] Found link name in SDF [base_gate::white_buoy_right::link]\r\n[Msg] Found that SDF has at least one link element, looking at each link...\r\n[Msg] Looking for name attribute in link number 0, which has 0 attributes\r\n[Msg] Found link name in SDF [base_gate::green_buoy::link]\r\n[Msg] Found that SDF has at least one link element, looking at each link...\r\n[Msg] Looking for name attribute in link number 0, which has 1 attributes\r\n[Msg] Found link name in SDF [circle_buoy::surmark46104::link]\r\n[Wrn] [Event.cc:61] Warning: Deleting a connection right after creation. Make sure to save the ConnectionPtr from a Connect call\r\n[Msg] Found SDF parameter bodyName as [base_link]\r\n[Msg] USV Model Link Name = base_link\r\n[Msg] Wind direction unit vector = -0.707107 0.707107 0\r\n[Msg] Wind coefficient vector = 0.5 0.5 0.33\r\n[Msg] Wind mean velocity = 0\r\n[Msg] var wind gain constants = 100\r\n[Msg] var wind time constants = 5\r\n[Msg] Random seed value = 5\r\n[ INFO] [1558974375.662122135, 0.022000000]: waitForService: Service [/gazebo/set_physics_properties] is now available.\r\n[ INFO] [1558974375.677576156, 0.037000000]: Physics dynamic reconfigure ready.\r\n[spawn_model-3] process has finished cleanly\r\nlog file: /home/rumman/.ros/log/21667758-809c-11e9-b04d-1cbfce230397/spawn_model-3*.log\r\n```\r\n\r\nHere is the output of spawn\\_model-3.log\r\n\r\n```\r\n[rospy.client][INFO] 2019-05-27 10:22:06,307: init_node, name[/spawn_model], pid\r\n[9570]\r\n[xmlrpc][INFO] 2019-05-27 10:22:06,308: XML-RPC server binding to 0.0.0.0:0\r\n[xmlrpc][INFO] 2019-05-27 10:22:06,308: Started XML-RPC server [http://rumman-pc\r\n:41477/]\r\n[rospy.init][INFO] 2019-05-27 10:22:06,308: ROS Slave URI: [http://rumman-pc:414\r\n77/]\r\n[rospy.impl.masterslave][INFO] 2019-05-27 10:22:06,308: _ready: http://rumman-pc\r\n:41477/\r\n[rospy.registration][INFO] 2019-05-27 10:22:06,309: Registering with master node\r\n http://localhost:11311\r\n[xmlrpc][INFO] 2019-05-27 10:22:06,309: xml rpc node: starting XML-RPC server\r\n[rospy.init][INFO] 2019-05-27 10:22:06,408: registered with master\r\n[rospy.rosout][INFO] 2019-05-27 10:22:06,409: initializing /rosout core topic\r\n[rospy.rosout][INFO] 2019-05-27 10:22:06,411: connected to core topic /rosout\r\n[rospy.simtime][INFO] 2019-05-27 10:22:06,412: initializing /clock core topic\r\n[rospy.simtime][INFO] 2019-05-27 10:22:06,414: connected to core topic /clock\r\n[rosout][INFO] 2019-05-27 10:22:06,416: Loading model XML from ros parameter rob\r\not_description\r\n[rosout][INFO] 2019-05-27 10:22:06,426: Waiting for service /gazebo/spawn_urdf_m\r\nodel\r\n[rospy.internal][INFO] 2019-05-27 10:22:06,641: topic[/rosout] adding connection\r\n to [/rosout], count 0\r\n[rospy.internal][INFO] 2019-05-27 10:22:09,591: topic[/clock] adding connection to [http://rumman-pc:41083/], count 0\r\n[rosout][INFO] 2019-05-27 10:22:09,739: Calling service /gazebo/spawn_urdf_model\r\n[rosout][INFO] 2019-05-27 10:22:09,955: Spawn status: SpawnModel: Successfully spawned entity\r\n[rospy.core][INFO] 2019-05-27 10:22:09,956: signal_shutdown [atexit]\r\n[rospy.internal][INFO] 2019-05-27 10:22:09,960: topic[/rosout] removing connection to /rosout\r\n[rospy.internal][INFO] 2019-05-27 10:22:09,960: topic[/clock] removing connection to http://rumman-pc:41083/\r\n[rospy.internal][WARNING] 2019-05-27 10:22:09,961: Unknown error initiating TCP/IP socket to rumman-pc:38609 (http://rumman-pc:41083/): Traceback (most recent call last):\r\n  File \"/opt/ros/melodic/lib/python2.7/dist-packages/rospy/impl/tcpros_base.py\", line 558, in connect\r\n    self.read_header()\r\n  File \"/opt/ros/melodic/lib/python2.7/dist-packages/rospy/impl/tcpros_base.py\", line 653, in read_header\r\n    self._validate_header(read_ros_handshake_header(sock, self.read_buff, self.protocol.buff_size))\r\nAttributeError: 'NoneType' object has no attribute 'buff_size'\r\n\r\n[rospy.topics][ERROR] 2019-05-27 10:22:09,961: Traceback (most recent call last):\r\n  File \"/opt/ros/melodic/lib/python2.7/dist-packages/rospy/topics.py\", line 326, in close\r\n    c.close()\r\n  File \"/opt/ros/melodic/lib/python2.7/dist-packages/rospy/impl/tcpros_base.py\", line 841, in close\r\n    self.socket.close()\r\nAttributeError: 'NoneType' object has no attribute 'close'\r\n```", "markup": "markdown", "html": "<p><img alt=\"\" src=\"https://lh3.googleusercontent.com/ViRAVnX8F1pLc5goTZ-2bFzb6FKICK-4ENKoXvIGwKSnQz_kKPFbyT6-rWUhxiLdPQD39cVSKlJ7wy4HeKpI59Z_gRrRtoFMSdMDTdm5tO9aPnR-hmpRoqDnLqEeKnKnCSEaM3mU\" />\nEvery time I launch VRX scenes <em>(on latest default)</em> in gazebo I get this black screen instead <em>(I have attached detailed logs).</em> I tried to use a clean clone of the repo and the error persists. Other gazebo scenes (not from VRX repo) run fine. Removing the last two ground stations from sandisland.xacro seems to fix the problem.</p>\n<p>Verbose launch gives the following output:</p>\n<div class=\"codehilite\"><pre><span></span>Verbose launch gives the following output:\nprocess[gazebo-1]: started with pid [10793]\nprocess[gazebo_gui-2]: started with pid [10798]\nprocess[spawn_model-3]: started with pid [10803]\nGazebo multi-robot simulator, version 9.0.0\nCopyright (C) 2012 Open Source Robotics Foundation.\nReleased under the Apache 2 License.\nhttp://gazebosim.org\n\nGazebo multi-robot simulator, version 9.0.0\nCopyright (C) 2012 Open Source Robotics Foundation.\nReleased under the Apache 2 License.\nhttp://gazebosim.org\n\n[Wrn] [GuiIface.cc:199] g/gui-plugin is really loading a SystemPlugin. To load a GUI plugin please use --gui-client-plugin \n[ INFO] [1558974371.814151451]: Finished loading Gazebo ROS API Plugin.\n[ INFO] [1558974371.814979692]: waitForService: Service [/gazebo/set_physics_properties] has not been advertised, waiting...\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.31.54.124\n[ INFO] [1558974371.858777536]: Finished loading Gazebo ROS API Plugin.\n[ INFO] [1558974371.859882245]: waitForService: Service [/gazebo_gui/set_physics_properties] has not been advertised, waiting...\n[Msg] Waiting for master.\n[Msg] Connected to gazebo master @ http://127.0.0.1:11345\n[Msg] Publicized address: 172.31.54.124\nWarning [parser.cc:759] XML Attribute[xmlns:xacro] in element[sdf] not defined in SDF, ignoring.\nWarning [parser.cc:759] XML Attribute[xmlns:xacro] in element[world] not defined in SDF, ignoring.\n[Err] [Node.cc:105] No namespace found\n[Err] [Node.cc:105] No namespace found\n[Msg] Found that SDF has at least one link element, looking at each link...\n[Msg] Looking for name attribute in link number 0, which has 0 attributes\n[Msg] Found link name in SDF [gate_start_red::link]\n[Msg] Found that SDF has at least one link element, looking at each link...\n[Msg] Looking for name attribute in link number 0, which has 0 attributes\n[Msg] Found link name in SDF [gate_start_green::link]\n[Msg] Found that SDF has at least one link element, looking at each link...\n[Msg] Looking for name attribute in link number 0, which has 0 attributes\n[Msg] Found link name in SDF [gate_end_red::link]\n[Msg] Found that SDF has at least one link element, looking at each link...\n[Msg] Looking for name attribute in link number 0, which has 0 attributes\n[Msg] Found link name in SDF [gate_end_green::link]\n[Msg] Found that SDF has at least one link element, looking at each link...\n[Msg] Looking for name attribute in link number 0, which has 0 attributes\n[Msg] Found link name in SDF [base_link]\n[Msg] Found that SDF has at least one link element, looking at each link...\n[Msg] Looking for name attribute in link number 0, which has 0 attributes\n[Msg] Found link name in SDF [base_gate::red_buoy::link]\n[Msg] Found that SDF has at least one link element, looking at each link...\n[Msg] Looking for name attribute in link number 0, which has 1 attributes\n[Msg] Found link name in SDF [base_gate::white_buoy_left::link]\n[Msg] Found that SDF has at least one link element, looking at each link...\n[Msg] Looking for name attribute in link number 0, which has 1 attributes\n[Msg] Found link name in SDF [base_gate::white_buoy_right::link]\n[Msg] Found that SDF has at least one link element, looking at each link...\n[Msg] Looking for name attribute in link number 0, which has 0 attributes\n[Msg] Found link name in SDF [base_gate::green_buoy::link]\n[Msg] Found that SDF has at least one link element, looking at each link...\n[Msg] Looking for name attribute in link number 0, which has 1 attributes\n[Msg] Found link name in SDF [circle_buoy::surmark46104::link]\n[Wrn] [Event.cc:61] Warning: Deleting a connection right after creation. Make sure to save the ConnectionPtr from a Connect call\n[Msg] Found SDF parameter bodyName as [base_link]\n[Msg] USV Model Link Name = base_link\n[Msg] Wind direction unit vector = -0.707107 0.707107 0\n[Msg] Wind coefficient vector = 0.5 0.5 0.33\n[Msg] Wind mean velocity = 0\n[Msg] var wind gain constants = 100\n[Msg] var wind time constants = 5\n[Msg] Random seed value = 5\n[ INFO] [1558974375.662122135, 0.022000000]: waitForService: Service [/gazebo/set_physics_properties] is now available.\n[ INFO] [1558974375.677576156, 0.037000000]: Physics dynamic reconfigure ready.\n[spawn_model-3] process has finished cleanly\nlog file: /home/rumman/.ros/log/21667758-809c-11e9-b04d-1cbfce230397/spawn_model-3*.log\n</pre></div>\n\n\n<p>Here is the output of spawn_model-3.log</p>\n<div class=\"codehilite\"><pre><span></span>[rospy.client][INFO] 2019-05-27 10:22:06,307: init_node, name[/spawn_model], pid\n[9570]\n[xmlrpc][INFO] 2019-05-27 10:22:06,308: XML-RPC server binding to 0.0.0.0:0\n[xmlrpc][INFO] 2019-05-27 10:22:06,308: Started XML-RPC server [http://rumman-pc\n:41477/]\n[rospy.init][INFO] 2019-05-27 10:22:06,308: ROS Slave URI: [http://rumman-pc:414\n77/]\n[rospy.impl.masterslave][INFO] 2019-05-27 10:22:06,308: _ready: http://rumman-pc\n:41477/\n[rospy.registration][INFO] 2019-05-27 10:22:06,309: Registering with master node\n http://localhost:11311\n[xmlrpc][INFO] 2019-05-27 10:22:06,309: xml rpc node: starting XML-RPC server\n[rospy.init][INFO] 2019-05-27 10:22:06,408: registered with master\n[rospy.rosout][INFO] 2019-05-27 10:22:06,409: initializing /rosout core topic\n[rospy.rosout][INFO] 2019-05-27 10:22:06,411: connected to core topic /rosout\n[rospy.simtime][INFO] 2019-05-27 10:22:06,412: initializing /clock core topic\n[rospy.simtime][INFO] 2019-05-27 10:22:06,414: connected to core topic /clock\n[rosout][INFO] 2019-05-27 10:22:06,416: Loading model XML from ros parameter rob\not_description\n[rosout][INFO] 2019-05-27 10:22:06,426: Waiting for service /gazebo/spawn_urdf_m\nodel\n[rospy.internal][INFO] 2019-05-27 10:22:06,641: topic[/rosout] adding connection\n to [/rosout], count 0\n[rospy.internal][INFO] 2019-05-27 10:22:09,591: topic[/clock] adding connection to [http://rumman-pc:41083/], count 0\n[rosout][INFO] 2019-05-27 10:22:09,739: Calling service /gazebo/spawn_urdf_model\n[rosout][INFO] 2019-05-27 10:22:09,955: Spawn status: SpawnModel: Successfully spawned entity\n[rospy.core][INFO] 2019-05-27 10:22:09,956: signal_shutdown [atexit]\n[rospy.internal][INFO] 2019-05-27 10:22:09,960: topic[/rosout] removing connection to /rosout\n[rospy.internal][INFO] 2019-05-27 10:22:09,960: topic[/clock] removing connection to http://rumman-pc:41083/\n[rospy.internal][WARNING] 2019-05-27 10:22:09,961: Unknown error initiating TCP/IP socket to rumman-pc:38609 (http://rumman-pc:41083/): Traceback (most recent call last):\n  File &quot;/opt/ros/melodic/lib/python2.7/dist-packages/rospy/impl/tcpros_base.py&quot;, line 558, in connect\n    self.read_header()\n  File &quot;/opt/ros/melodic/lib/python2.7/dist-packages/rospy/impl/tcpros_base.py&quot;, line 653, in read_header\n    self._validate_header(read_ros_handshake_header(sock, self.read_buff, self.protocol.buff_size))\nAttributeError: &#39;NoneType&#39; object has no attribute &#39;buff_size&#39;\n\n[rospy.topics][ERROR] 2019-05-27 10:22:09,961: Traceback (most recent call last):\n  File &quot;/opt/ros/melodic/lib/python2.7/dist-packages/rospy/topics.py&quot;, line 326, in close\n    c.close()\n  File &quot;/opt/ros/melodic/lib/python2.7/dist-packages/rospy/impl/tcpros_base.py&quot;, line 841, in close\n    self.socket.close()\nAttributeError: &#39;NoneType&#39; object has no attribute &#39;close&#39;\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2019-05-28T20:20:15.642551+00:00", "milestone": null, "updated_on": "2019-05-28T22:18:32.626447+00:00", "type": "issue", "id": 95}