{"priority": "major", "kind": "proposal", "repository": {"links": {"self": {"href": "data/repositories/osrf/vrx.json"}, "html": {"href": "#!/osrf/vrx"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e278ca38-7edb-4e62-b785-46dff5617d98}ts=2274605"}}, "type": "repository", "name": "vrx", "full_name": "osrf/vrx", "uuid": "{e278ca38-7edb-4e62-b785-46dff5617d98}"}, "links": {"attachments": {"href": "data/repositories/osrf/vrx/issues/166/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/vrx/issues/166.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/vrx/issues/166/watch"}, "comments": {"href": "data/repositories/osrf/vrx/issues/166/comments_page=1.json"}, "html": {"href": "#!/osrf/vrx/issues/166/first-sequence-of-light-buoy-is-not-synced"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/vrx/issues/166/vote"}}, "reporter": {"display_name": "Brian Bingham", "uuid": "{9cdea257-248f-486e-8858-49d8485a916f}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9cdea257-248f-486e-8858-49d8485a916f%7D"}, "html": {"href": "https://bitbucket.org/%7B9cdea257-248f-486e-8858-49d8485a916f%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6c52d6e5-77e0-41a8-8b6e-cb9462f4d5f1/7a690884-fc47-4bca-9c2b-baecee4d3dc9/128"}}, "nickname": "brian_bingham", "type": "user", "account_id": "557058:6c52d6e5-77e0-41a8-8b6e-cb9462f4d5f1"}, "title": "First sequence of light buoy is not synced with scan_dock_scoring plugin", "component": {"name": "Plugin", "links": {"self": {"href": "data/repositories/osrf/vrx/components/519936.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "Within the scan\\_dock\\_scoring plugin includes ability to set light buoy color sequence by specifying color\\_1, color\\_2 and color\\_3 parameters.  The expected sequence is published to the light\\_buoy plugin via gazebo transport - see the OnRunning\\(\\) function in scan\\_dock\\_scoring\\_plugin.cc.  \r\n\r\nBecause the correct color sequence isn\u2019t published until the transition to OnRunning, the sequence defined the the model is used until then.  This will be confusing for teams since they will see one sequence during initialization and ready phases and then the sequence will change.\r\n\r\nHow to reproduce:\r\n\r\n`roslaunch vrx_gazebo scan_and_dock.launch verbose:=true extra_gazebo_args:=\"--pause\"`\r\n\r\nYou will see that the initial sequence is R-G-B as defined in models/robotx\\_light\\_buoy/model.sdf.  When the scoring plugin transitions to Ready, then the sequence switches to B-G-R as defined in  worlds/scan\\_and\\_docl.world.xacro\r\n\r\nOptions include\r\n\r\n1. Do nothing and expect the teams to monitor the state information in the ROS API.  \r\n2. Have the scan\\_dock\\_scoring\\_plugin push the correct sequence to the light buoy on initialization.  Teams still wouldn\u2019t be able to score anything, but would avoid changing the sequence.\r\n3. Change the default sequence defined in the robotx\\_light\\_buoy model.sdf \\(and modify the light\\_buoy\\_plugin\\) so that the buoy is \u201coff\u201d until the correct sequence is published.\r\n\r\n\u200c", "markup": "markdown", "html": "<p>Within the scan_dock_scoring plugin includes ability to set light buoy color sequence by specifying color_1, color_2 and color_3 parameters.  The expected sequence is published to the light_buoy plugin via gazebo transport - see the OnRunning() function in scan_dock_scoring_plugin.cc.  </p>\n<p>Because the correct color sequence isn\u2019t published until the transition to OnRunning, the sequence defined the the model is used until then.  This will be confusing for teams since they will see one sequence during initialization and ready phases and then the sequence will change.</p>\n<p>How to reproduce:</p>\n<p><code>roslaunch vrx_gazebo scan_and_dock.launch verbose:=true extra_gazebo_args:=\"--pause\"</code></p>\n<p>You will see that the initial sequence is R-G-B as defined in models/robotx_light_buoy/model.sdf.  When the scoring plugin transitions to Ready, then the sequence switches to B-G-R as defined in  worlds/scan_and_docl.world.xacro</p>\n<p>Options include</p>\n<ol>\n<li>Do nothing and expect the teams to monitor the state information in the ROS API.  </li>\n<li>Have the scan_dock_scoring_plugin push the correct sequence to the light buoy on initialization.  Teams still wouldn\u2019t be able to score anything, but would avoid changing the sequence.</li>\n<li>Change the default sequence defined in the robotx_light_buoy model.sdf (and modify the light_buoy_plugin) so that the buoy is \u201coff\u201d until the correct sequence is published.</li>\n</ol>\n<p>\u200c</p>", "type": "rendered"}, "assignee": null, "state": "resolved", "version": null, "edited_on": null, "created_on": "2019-09-21T02:38:37.493774+00:00", "milestone": null, "updated_on": "2019-09-28T00:35:59.832880+00:00", "type": "issue", "id": 166}