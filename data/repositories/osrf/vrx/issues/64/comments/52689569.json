{"links": {"self": {"href": "data/repositories/osrf/vrx/issues/64/comments/52689569.json"}, "html": {"href": "#!/osrf/vrx/issues/64#comment-52689569"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/vrx/issues/64.json"}}, "type": "issue", "id": 64, "repository": {"links": {"self": {"href": "data/repositories/osrf/vrx.json"}, "html": {"href": "#!/osrf/vrx"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e278ca38-7edb-4e62-b785-46dff5617d98}ts=2274605"}}, "type": "repository", "name": "vrx", "full_name": "osrf/vrx", "uuid": "{e278ca38-7edb-4e62-b785-46dff5617d98}"}, "title": "Possible frame error in simulated GPS velocity generation"}, "content": {"raw": "Thank you for doing such a great job of documenting all of this and setting up the test cases. \n\nWith regards to the coordinate frames for Gazebo and the [hector\\_gazebo\\_ros\\_gps plugin](http://wiki.ros.org/hector_gazebo_plugins#GazeboRosGps), I believe this is what is going on\u2026\n\n* For the hector\\_gazebo\\_ros\\_gps plugin, the referenceHeading parameter defines the 2D rotation from the Gazebo \\+X coordinate to the HectorGPS \\+Latitude coordinate - in degrees.\n\n    * For our setup, the referenceHeading of 90 degrees creates a scenario where Gazebo\\+X=HectorGPS\\+Lon=East, which is the setup we are going for.  This keeps the Gazebo frame consistent with the ROS ENU convention.\n    * If we change the referenceHeading to 0 degrees, then Gazebo\\+X=HectorGPS\\+Lat=East, not what we want.\n    \n* The hector\\_gazebo\\_ros\\_gps fix\\_velocity publication provides the velocity in NWU \\(north, west, up\\) coordinates.  \n\n    * So, with the referenceHeading of 90 degrees, moving along the Gazebo\\+X=HectorGPS\\+Lon=East direction generates a fix\\_velocity in the negative y direction \\(West\\).  I believe this is consistent with your testing.\n    \n\nSo from my testing, I think there is consistency between the Gazebo coordinates and the Hector GPS plugin.  The NWU convention for reporting fix velocities isn\u2019t necessarily intuitive.\n\nI haven\u2019t had much experience with the built-in Gazebo GPS sensor, so I\u2019m not sure why it would provide lat/lon values that are 180 degrees out from the Hector plugin.", "markup": "markdown", "html": "<p>Thank you for doing such a great job of documenting all of this and setting up the test cases. </p>\n<p>With regards to the coordinate frames for Gazebo and the <a data-is-external-link=\"true\" href=\"http://wiki.ros.org/hector_gazebo_plugins#GazeboRosGps\" rel=\"nofollow\">hector_gazebo_ros_gps plugin</a>, I believe this is what is going on\u2026</p>\n<ul>\n<li>\n<p>For the hector_gazebo_ros_gps plugin, the referenceHeading parameter defines the 2D rotation from the Gazebo +X coordinate to the HectorGPS +Latitude coordinate - in degrees.</p>\n<ul>\n<li>For our setup, the referenceHeading of 90 degrees creates a scenario where Gazebo+X=HectorGPS+Lon=East, which is the setup we are going for.  This keeps the Gazebo frame consistent with the ROS ENU convention.</li>\n<li>If we change the referenceHeading to 0 degrees, then Gazebo+X=HectorGPS+Lat=East, not what we want.</li>\n</ul>\n</li>\n<li>\n<p>The hector_gazebo_ros_gps fix_velocity publication provides the velocity in NWU (north, west, up) coordinates.  </p>\n<ul>\n<li>So, with the referenceHeading of 90 degrees, moving along the Gazebo+X=HectorGPS+Lon=East direction generates a fix_velocity in the negative y direction (West).  I believe this is consistent with your testing.</li>\n</ul>\n</li>\n</ul>\n<p>So from my testing, I think there is consistency between the Gazebo coordinates and the Hector GPS plugin.  The NWU convention for reporting fix velocities isn\u2019t necessarily intuitive.</p>\n<p>I haven\u2019t had much experience with the built-in Gazebo GPS sensor, so I\u2019m not sure why it would provide lat/lon values that are 180 degrees out from the Hector plugin.</p>", "type": "rendered"}, "created_on": "2019-06-21T18:12:12.979247+00:00", "user": {"display_name": "Brian Bingham", "uuid": "{9cdea257-248f-486e-8858-49d8485a916f}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9cdea257-248f-486e-8858-49d8485a916f%7D"}, "html": {"href": "https://bitbucket.org/%7B9cdea257-248f-486e-8858-49d8485a916f%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6c52d6e5-77e0-41a8-8b6e-cb9462f4d5f1/7a690884-fc47-4bca-9c2b-baecee4d3dc9/128"}}, "nickname": "brian_bingham", "type": "user", "account_id": "557058:6c52d6e5-77e0-41a8-8b6e-cb9462f4d5f1"}, "updated_on": null, "type": "issue_comment", "id": 52689569}