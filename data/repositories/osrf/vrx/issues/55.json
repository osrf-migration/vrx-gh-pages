{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/vrx.json"}, "html": {"href": "#!/osrf/vrx"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e278ca38-7edb-4e62-b785-46dff5617d98}ts=2274605"}}, "type": "repository", "name": "vrx", "full_name": "osrf/vrx", "uuid": "{e278ca38-7edb-4e62-b785-46dff5617d98}"}, "links": {"attachments": {"href": "data/repositories/osrf/vrx/issues/55/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/vrx/issues/55.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/vrx/issues/55/watch"}, "comments": {"href": "data/repositories/osrf/vrx/issues/55/comments_page=1.json"}, "html": {"href": "#!/osrf/vrx/issues/55/set-uid-and-gid-of-container-user-at"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/vrx/issues/55/vote"}}, "reporter": {"display_name": "Michael McCarrin", "uuid": "{3c3f500d-bbf6-472c-b8f7-627e5eabc226}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3c3f500d-bbf6-472c-b8f7-627e5eabc226%7D"}, "html": {"href": "https://bitbucket.org/%7B3c3f500d-bbf6-472c-b8f7-627e5eabc226%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a50abc93a3175f92c79e7521dfe089c0d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMM-0.png"}}, "nickname": "m1chaelm", "type": "user", "account_id": "5b2a9176467c9a09caa71ab1"}, "title": "Set UID and GID of container user at runtime", "component": null, "votes": 0, "watches": 1, "content": {"raw": "Currently the Docker image builds with the user \"developer\" and a UID and GID that matches the person building it. This causes at least two problems:\r\n1) It breaks the automatic build process, since there is no user in the autobuild environment that it can match the UID to.\r\n2) It causes undesirable behavior in cases where the person running the image has a different UID from the person who built it. (See discussion [here](https://boxboat.com/2017/07/25/fixuid-change-docker-container-uid-gid/) and [here](https://github.com/moby/moby/issues/7198)\r\n\r\nThis problem is widely acknowledged and a fix has been requested but not yet implemented. In the meantime, many workarounds have been proposed. One of the most thorough of these is [fixuid](https://boxboat.com/2017/07/25/fixuid-change-docker-container-uid-gid/), which solves the problem by checking for UID and GID mismatches in a script set to the container entrypoint, then adjusting the internet user's UID and GID to match if necessary, and also scanning the file system to make the necessary file ownership changes.\r\n\r\nAlthough not ideal, this is seems like the best available solution until there is official support for something better.", "markup": "markdown", "html": "<p>Currently the Docker image builds with the user \"developer\" and a UID and GID that matches the person building it. This causes at least two problems:\n1) It breaks the automatic build process, since there is no user in the autobuild environment that it can match the UID to.\n2) It causes undesirable behavior in cases where the person running the image has a different UID from the person who built it. (See discussion <a data-is-external-link=\"true\" href=\"https://boxboat.com/2017/07/25/fixuid-change-docker-container-uid-gid/\" rel=\"nofollow\">here</a> and <a data-is-external-link=\"true\" href=\"https://github.com/moby/moby/issues/7198\" rel=\"nofollow\">here</a></p>\n<p>This problem is widely acknowledged and a fix has been requested but not yet implemented. In the meantime, many workarounds have been proposed. One of the most thorough of these is <a data-is-external-link=\"true\" href=\"https://boxboat.com/2017/07/25/fixuid-change-docker-container-uid-gid/\" rel=\"nofollow\">fixuid</a>, which solves the problem by checking for UID and GID mismatches in a script set to the container entrypoint, then adjusting the internet user's UID and GID to match if necessary, and also scanning the file system to make the necessary file ownership changes.</p>\n<p>Although not ideal, this is seems like the best available solution until there is official support for something better.</p>", "type": "rendered"}, "assignee": {"display_name": "Michael McCarrin", "uuid": "{3c3f500d-bbf6-472c-b8f7-627e5eabc226}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B3c3f500d-bbf6-472c-b8f7-627e5eabc226%7D"}, "html": {"href": "https://bitbucket.org/%7B3c3f500d-bbf6-472c-b8f7-627e5eabc226%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/a50abc93a3175f92c79e7521dfe089c0d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsMM-0.png"}}, "nickname": "m1chaelm", "type": "user", "account_id": "5b2a9176467c9a09caa71ab1"}, "state": "resolved", "version": null, "edited_on": null, "created_on": "2018-10-11T04:07:13.612276+00:00", "milestone": {"name": "0.3", "links": {"self": {"href": "data/repositories/osrf/vrx/milestones/346016.json"}}}, "updated_on": "2018-10-23T21:32:42.205921+00:00", "type": "issue", "id": 55}