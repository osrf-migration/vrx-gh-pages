{"links": {"self": {"href": "data/repositories/osrf/vrx/issues/29/comments/50207776.json"}, "html": {"href": "#!/osrf/vrx/issues/29#comment-50207776"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/vrx/issues/29.json"}}, "type": "issue", "id": 29, "repository": {"links": {"self": {"href": "data/repositories/osrf/vrx.json"}, "html": {"href": "#!/osrf/vrx"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e278ca38-7edb-4e62-b785-46dff5617d98}ts=2274605"}}, "type": "repository", "name": "vrx", "full_name": "osrf/vrx", "uuid": "{e278ca38-7edb-4e62-b785-46dff5617d98}"}, "title": "The ocean reflects the laser beams"}, "content": {"raw": "HI Carlos,\n\nAfter some experimentation, the laser_retro tag is supported by the GPU velodyne_lidar plugin when applied to the visual element of the SDF description.  However, all generated lidar returns within the maximum and minimum ranges will be returned even if they have a low intensity value.  I have modified a version of the velodyne_simulator plugin that will optionally clip points that have an intensity that lies beneath a specified threshold.  If the laser retro value of the ocean is set to a negative value, ocean points can then be removed from the lidar return while still detecting objects that have the default laser_retro value of zero.  This version of the plugin can be found here:  https://bitbucket.org/JonathanWheare/velodyne_simulator/src/master/\n\nWithout clipping.  In this image the lidar has returned approximately 14,000 points.\n![Screenshot from 2019-01-23 13-44-37.png](data/bitbucket.org/repo/BgXLzgM/images/266317191-Screenshot_from_2019-01-23_13-44-37.png)\n\nwith clipping.  In this image only approximately 2500 points have been returned by the lidar.\n![Screenshot from 2019-01-23 13-45-24.png](data/bitbucket.org/repo/BgXLzgM/images/29324721-Screenshot_from_2019-01-23_13-45-24.png)\n(Note: buoy laser_retro values have been set to 100 to enable them to be clearly distinguished from the ocean return.)\n\nRegards,\nJonathan.", "markup": "markdown", "html": "<p>HI Carlos,</p>\n<p>After some experimentation, the laser_retro tag is supported by the GPU velodyne_lidar plugin when applied to the visual element of the SDF description.  However, all generated lidar returns within the maximum and minimum ranges will be returned even if they have a low intensity value.  I have modified a version of the velodyne_simulator plugin that will optionally clip points that have an intensity that lies beneath a specified threshold.  If the laser retro value of the ocean is set to a negative value, ocean points can then be removed from the lidar return while still detecting objects that have the default laser_retro value of zero.  This version of the plugin can be found here:  <a href=\"https://bitbucket.org/JonathanWheare/velodyne_simulator/src/master/\" rel=\"nofollow\" class=\"ap-connect-link\">https://bitbucket.org/JonathanWheare/velodyne_simulator/src/master/</a></p>\n<p>Without clipping.  In this image the lidar has returned approximately 14,000 points.\n<img alt=\"Screenshot from 2019-01-23 13-44-37.png\" src=\"data/bitbucket.org/repo/BgXLzgM/images/266317191-Screenshot_from_2019-01-23_13-44-37.png\" /></p>\n<p>with clipping.  In this image only approximately 2500 points have been returned by the lidar.\n<img alt=\"Screenshot from 2019-01-23 13-45-24.png\" src=\"data/bitbucket.org/repo/BgXLzgM/images/29324721-Screenshot_from_2019-01-23_13-45-24.png\" />\n(Note: buoy laser_retro values have been set to 100 to enable them to be clearly distinguished from the ocean return.)</p>\n<p>Regards,\nJonathan.</p>", "type": "rendered"}, "created_on": "2019-01-23T12:30:36.693847+00:00", "user": {"display_name": "Jonathan Wheare", "uuid": "{65043b9b-c505-4efe-852a-3d2393a0ee80}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B65043b9b-c505-4efe-852a-3d2393a0ee80%7D"}, "html": {"href": "https://bitbucket.org/%7B65043b9b-c505-4efe-852a-3d2393a0ee80%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/initials/JW-2.png"}}, "nickname": "Jonathan Wheare", "type": "user", "account_id": "5b9791e8a9fd6d2c834b5864"}, "updated_on": null, "type": "issue_comment", "id": 50207776}