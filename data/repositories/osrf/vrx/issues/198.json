{"priority": "minor", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/vrx.json"}, "html": {"href": "#!/osrf/vrx"}, "avatar": {"href": "data/bytebucket.org/ravatar/{e278ca38-7edb-4e62-b785-46dff5617d98}ts=2274605"}}, "type": "repository", "name": "vrx", "full_name": "osrf/vrx", "uuid": "{e278ca38-7edb-4e62-b785-46dff5617d98}"}, "links": {"attachments": {"href": "data/repositories/osrf/vrx/issues/198/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/vrx/issues/198.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/vrx/issues/198/watch"}, "comments": {"href": "data/repositories/osrf/vrx/issues/198/comments_page=1.json"}, "html": {"href": "#!/osrf/vrx/issues/198/imu-readings-reported-wrongly-in-different"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/vrx/issues/198/vote"}}, "reporter": {"display_name": "Hashir Zahir", "uuid": "{0033cdb9-ea6e-4c6a-a9ad-d462a485643d}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B0033cdb9-ea6e-4c6a-a9ad-d462a485643d%7D"}, "html": {"href": "https://bitbucket.org/%7B0033cdb9-ea6e-4c6a-a9ad-d462a485643d%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/3c71628af17207fad1dd0ea6280b41f1d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsHZ-5.png"}}, "nickname": "hzahir", "type": "user", "account_id": "557058:6b6463b7-2835-47c7-8c22-fdef36e9e325"}, "title": "IMU readings reported wrongly in different Roll/Pitch", "component": {"name": "Plugin", "links": {"self": {"href": "data/repositories/osrf/vrx/components/519936.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "This is a related issue to [Issue 188](#!/osrf/vrx/issues/188/), which has already been resolved in [pull request 216](#!/osrf/vrx/pull-requests/216/fix-issue-188/diff). However, I notice some strange behavior.\r\n\r\nUsing revolute joints fixed the issue \\(mostly\\) or so I thought as I have discovered a bug. Rotations in yaw for the IMU plugin work perfectly with this new fix \\(the fixed joint method reports inaccurate readings\\), however, rotations in pitch or roll result in incorrect readings from the IMU.\r\n\r\nFor example, using\u00a0`<xacro:wamv_imu name=\"imu_wamv\" y=\"-0.2\" R=\"3.14159\"/>`\u00a0where the roll is set to 180 degrees instead of yaw, the raw readings reported by the IMU plugin is \\(r,p,y\\) = \\(0,0, 2.76\\) when the correct readings are supposed to be \\(r,p,y\\) = \\(0,0,-2.76\\) \\(notice the yaw has been flipped/inverted\\). This does not make sense since physical IMU has been flipped 180 degrees. Setting an arbitary value of rpy in the macro results in even more disastrous readings.\r\n\r\nExample:\u00a0`<xacro:wamv_imu name=\"imu_wamv\" y=\"-0.2\" R=\"1\" P=\"0\" Y=\"0\"/>`\r\n\r\nresults in rpy = \\(1.966, -0.319, -2.928\\), when the actual reading should have been rpy = \\(1,0,-2.76\\).\r\n\r\nCan someone help to verify this behavior? And also any ideas on a possible fix? This is more for teams whose real life IMU provide NED data and hence the IMU link is provided with rpy = \\(3.14,0,0\\) but unfortunately the plugin doesnt seem to respond well to roll or pitch. Thanks.", "markup": "markdown", "html": "<p>This is a related issue to <a data-is-external-link=\"true\" href=\"#!/osrf/vrx/issues/188/\" rel=\"nofollow\">Issue 188</a>, which has already been resolved in <a data-is-external-link=\"true\" href=\"#!/osrf/vrx/pull-requests/216/fix-issue-188/diff\" rel=\"nofollow\">pull request 216</a>. However, I notice some strange behavior.</p>\n<p>Using revolute joints fixed the issue (mostly) or so I thought as I have discovered a bug. Rotations in yaw for the IMU plugin work perfectly with this new fix (the fixed joint method reports inaccurate readings), however, rotations in pitch or roll result in incorrect readings from the IMU.</p>\n<p>For example, using\u00a0<code>&lt;xacro:wamv_imu name=\"imu_wamv\" y=\"-0.2\" R=\"3.14159\"/&gt;</code>\u00a0where the roll is set to 180 degrees instead of yaw, the raw readings reported by the IMU plugin is (r,p,y) = (0,0, 2.76) when the correct readings are supposed to be (r,p,y) = (0,0,-2.76) (notice the yaw has been flipped/inverted). This does not make sense since physical IMU has been flipped 180 degrees. Setting an arbitary value of rpy in the macro results in even more disastrous readings.</p>\n<p>Example:\u00a0<code>&lt;xacro:wamv_imu name=\"imu_wamv\" y=\"-0.2\" R=\"1\" P=\"0\" Y=\"0\"/&gt;</code></p>\n<p>results in rpy = (1.966, -0.319, -2.928), when the actual reading should have been rpy = (1,0,-2.76).</p>\n<p>Can someone help to verify this behavior? And also any ideas on a possible fix? This is more for teams whose real life IMU provide NED data and hence the IMU link is provided with rpy = (3.14,0,0) but unfortunately the plugin doesnt seem to respond well to roll or pitch. Thanks.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2020-04-10T08:50:02.057977+00:00", "milestone": null, "updated_on": "2020-04-10T11:58:43.175175+00:00", "type": "issue", "id": 198}