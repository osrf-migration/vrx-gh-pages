{"links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/122/comments/107680093.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/122/_/diff#comment-107680093"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 122, "links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/122.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/122"}}, "title": "Issue#94 buoyancy"}, "content": {"raw": "In [83e31e2](#!/osrf/vrx/commits/83e31e260079edbb4ed99e5691e72714d7c5bd30) converted buoyancy geometry for buoys to spheres.\n\nHere is the demos I use:\n\n1. Generate 100 surmark buoys\n\n```\ncd ~/vrx_ws/src/vrx/vrx_gazebo/scripts \n./generate_avoid_obstacles_buoys --L 500 --a3 0 --a5 0 --a7 0 --surmark46104 100 | tee ~/vrx_ws/src/vrx/vrx_gazebo/models/robotx_2018_qualifying_avoid_obstacles_buoys/model.sdf | tee ~/vrx_nosync_ws/src/vrx/vrx_gazebo/models/robotx_2018_qualifying_avoid_obstacles_buoys/model.sdf \n```\n\nRun\n\n```\n roslaunch wave_gazebo ocean_world_buoys.launch\n```\n\nThis runs at RTF 0.99 for me \\(frame rate ~60\\).\n\n2\\. Alternatively generate N=15 of our 7 buoys/totems for 105 buoyancy objects\n\n```\ncd ~/vrx_ws/src/vrx/vrx_gazebo/scripts \n./generate_avoid_obstacles_buoys --L 500 --a3 0 --a5 0 --a7 0 --surmark46104 0 --N 15 | tee ~/vrx_ws/src/vrx/vrx_gazebo/models/robotx_2018_qualifying_avoid_obstacles_buoys/model.sdf | tee ~/vrx_nosync_ws/src/vrx/vrx_gazebo/models/robotx_2018_qualifying_avoid_obstacles_buoys/model.sdf \n```\n\nThis runs at RTF ~0.6\n\nThe culprit seems to be that the totem makers we use, which use the surmark46104 with addition of a \u201ccover\u201d visual and a fixed joint.  If I run a test with 100 black totems the RTF falls to ~0.55 or so.  Seems to suggest that adding 100 joints is pretty costly.  In the future, to save some cycles,  we could consider generating a dedicated mesh for the colored totems to avoid the added cover and joint.\n\nOtherwise I think this is good for review.", "markup": "markdown", "html": "<p>In <a data-is-external-link=\"true\" href=\"#!/osrf/vrx/commits/83e31e260079edbb4ed99e5691e72714d7c5bd30\" rel=\"nofollow\">83e31e2</a> converted buoyancy geometry for buoys to spheres.</p>\n<p>Here is the demos I use:</p>\n<ol>\n<li>Generate 100 surmark buoys</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span>cd ~/vrx_ws/src/vrx/vrx_gazebo/scripts \n./generate_avoid_obstacles_buoys --L 500 --a3 0 --a5 0 --a7 0 --surmark46104 100 | tee ~/vrx_ws/src/vrx/vrx_gazebo/models/robotx_2018_qualifying_avoid_obstacles_buoys/model.sdf | tee ~/vrx_nosync_ws/src/vrx/vrx_gazebo/models/robotx_2018_qualifying_avoid_obstacles_buoys/model.sdf \n</pre></div>\n\n\n<p>Run</p>\n<div class=\"codehilite\"><pre><span></span> roslaunch wave_gazebo ocean_world_buoys.launch\n</pre></div>\n\n\n<p>This runs at RTF 0.99 for me (frame rate ~60).</p>\n<p>2. Alternatively generate N=15 of our 7 buoys/totems for 105 buoyancy objects</p>\n<div class=\"codehilite\"><pre><span></span>cd ~/vrx_ws/src/vrx/vrx_gazebo/scripts \n./generate_avoid_obstacles_buoys --L 500 --a3 0 --a5 0 --a7 0 --surmark46104 0 --N 15 | tee ~/vrx_ws/src/vrx/vrx_gazebo/models/robotx_2018_qualifying_avoid_obstacles_buoys/model.sdf | tee ~/vrx_nosync_ws/src/vrx/vrx_gazebo/models/robotx_2018_qualifying_avoid_obstacles_buoys/model.sdf \n</pre></div>\n\n\n<p>This runs at RTF ~0.6</p>\n<p>The culprit seems to be that the totem makers we use, which use the surmark46104 with addition of a \u201ccover\u201d visual and a fixed joint.  If I run a test with 100 black totems the RTF falls to ~0.55 or so.  Seems to suggest that adding 100 joints is pretty costly.  In the future, to save some cycles,  we could consider generating a dedicated mesh for the colored totems to avoid the added cover and joint.</p>\n<p>Otherwise I think this is good for review.</p>", "type": "rendered"}, "created_on": "2019-07-01T18:19:41.651400+00:00", "user": {"display_name": "Brian Bingham", "uuid": "{9cdea257-248f-486e-8858-49d8485a916f}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9cdea257-248f-486e-8858-49d8485a916f%7D"}, "html": {"href": "https://bitbucket.org/%7B9cdea257-248f-486e-8858-49d8485a916f%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6c52d6e5-77e0-41a8-8b6e-cb9462f4d5f1/7a690884-fc47-4bca-9c2b-baecee4d3dc9/128"}}, "nickname": "brian_bingham", "type": "user", "account_id": "557058:6c52d6e5-77e0-41a8-8b6e-cb9462f4d5f1"}, "updated_on": "2019-07-01T18:19:41.664691+00:00", "type": "pullrequest_comment", "id": 107680093}