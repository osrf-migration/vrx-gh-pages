{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/81/comments/94388711.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/81/_/diff#comment-94388711"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 81, "links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/81.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/81"}}, "title": "Integrating new method for implementing visual and physical wave field."}, "content": {"raw": "I ran a few tests to verify the implementation.  The plots below compare three scenarios:\n\n1. The \u201cno sync\u201d case, which is the current default branch, where the visual and physical wave representation are independent.\n2. The \u201csync\\_flat\u201d case, which is the wave\\_visualization\\_integrated branch, where the visual and wave representation are linked.  For this test I hard coded source code in [Wavefield.cc](http://Wavefield.cc) so that it generates three individual wave components to match our default setup in [wamv\\_gazebo\\_dynamics\\_plugin.xacro](#!/osrf/vrx/src/default/wamv_gazebo/urdf/dynamics/wamv_gazebo_dynamics_plugin.xacro).\n3. The \u201csync\\_steep\u201d case is identical to 2, but I set the steepness to 1.0\n\nThe test is a 30 second simulation.  Then I post-process the WAM-V state information for position and attitude. \n\n![](data/bitbucket.org/repo/BgXLzgM/images/450212508-figure_1.png)\n\u200c\n\n![](data/bitbucket.org/repo/BgXLzgM/images/322809996-figure_2.png)\n\u200c\n\n![](data/bitbucket.org/repo/BgXLzgM/images/2962941573-figure_3.png)\nBased on the plots above\u2026\n\n* The two implementations appear to be equivalent from a induced vehicle motion standpoint, which is encouraging.\n* For this relatively benign seastate the steepness value has a negligible effect on vessel motion.  This suggests that it might be reasonable to use a zero steepness value for the physical waves, which would alleviate the need for the multidimensional root search for the wave height \\(see Newton\u2019s method solver in WaveSampler::ComputeDepthDirectly within [Wavefield.cc](http://Wavefield.cc)\\).  Currently this doesn\u2019t seem to be a problem, but as the models get complex this simplification may have computational advantages.  Would certainly want to test under other scenarios.\n\n", "markup": "markdown", "html": "<p>I ran a few tests to verify the implementation.  The plots below compare three scenarios:</p>\n<ol>\n<li>The \u201cno sync\u201d case, which is the current default branch, where the visual and physical wave representation are independent.</li>\n<li>The \u201csync_flat\u201d case, which is the wave_visualization_integrated branch, where the visual and wave representation are linked.  For this test I hard coded source code in <a data-is-external-link=\"true\" href=\"http://Wavefield.cc\" rel=\"nofollow\">Wavefield.cc</a> so that it generates three individual wave components to match our default setup in <a data-is-external-link=\"true\" href=\"#!/osrf/vrx/src/default/wamv_gazebo/urdf/dynamics/wamv_gazebo_dynamics_plugin.xacro\" rel=\"nofollow\">wamv_gazebo_dynamics_plugin.xacro</a>.</li>\n<li>The \u201csync_steep\u201d case is identical to 2, but I set the steepness to 1.0</li>\n</ol>\n<p>The test is a 30 second simulation.  Then I post-process the WAM-V state information for position and attitude. </p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/BgXLzgM/images/450212508-figure_1.png\" />\n\u200c</p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/BgXLzgM/images/322809996-figure_2.png\" />\n\u200c</p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/BgXLzgM/images/2962941573-figure_3.png\" />\nBased on the plots above\u2026</p>\n<ul>\n<li>The two implementations appear to be equivalent from a induced vehicle motion standpoint, which is encouraging.</li>\n<li>For this relatively benign seastate the steepness value has a negligible effect on vessel motion.  This suggests that it might be reasonable to use a zero steepness value for the physical waves, which would alleviate the need for the multidimensional root search for the wave height (see Newton\u2019s method solver in WaveSampler::ComputeDepthDirectly within <a data-is-external-link=\"true\" href=\"http://Wavefield.cc\" rel=\"nofollow\">Wavefield.cc</a>).  Currently this doesn\u2019t seem to be a problem, but as the models get complex this simplification may have computational advantages.  Would certainly want to test under other scenarios.</li>\n</ul>", "type": "rendered"}, "created_on": "2019-03-09T01:58:45.532747+00:00", "user": {"display_name": "Brian Bingham", "uuid": "{9cdea257-248f-486e-8858-49d8485a916f}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9cdea257-248f-486e-8858-49d8485a916f%7D"}, "html": {"href": "https://bitbucket.org/%7B9cdea257-248f-486e-8858-49d8485a916f%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6c52d6e5-77e0-41a8-8b6e-cb9462f4d5f1/7a690884-fc47-4bca-9c2b-baecee4d3dc9/128"}}, "nickname": "brian_bingham", "type": "user", "account_id": "557058:6c52d6e5-77e0-41a8-8b6e-cb9462f4d5f1"}, "updated_on": "2019-03-09T01:58:45.540046+00:00", "type": "pullrequest_comment", "id": 94388711}, {"links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/81/comments/94518771.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/81/_/diff#comment-94518771"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 81, "links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/81.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/81"}}, "title": "Integrating new method for implementing visual and physical wave field."}, "content": {"raw": "I think the PR is good. A few suggestions:\n\n1. I\u2019d be tempted to remove the box and wam-v models from wave\\_gazebo as the box example does not add a lot in this case and the wam-v example duplicates the meshes from the main robot description package for this project.\n2. The tests in wave\\_gazebo\\_plugins are mostly empty placeholders as the majority of the code in the original versions tested the mesh based buoyancy code which has been removed \\(although tests to cover the remainder of the code would be good to have!\\).\n\nFor the license change, I think the best way to manage that is for me to create a fork of my code matching this PR \\(including name changes etc.\\) and license the repository under Apache 2.  That gives VRX an original source to refer to with matching license details and I can add a comment regarding the reason for the split licenses \\(i.e. dependencies on GPL licenses components in the full version\\). I can post that to Bitbucket using mercurial as a VCS if that helps on your side.", "markup": "markdown", "html": "<p>I think the PR is good. A few suggestions:</p>\n<ol>\n<li>I\u2019d be tempted to remove the box and wam-v models from wave_gazebo as the box example does not add a lot in this case and the wam-v example duplicates the meshes from the main robot description package for this project.</li>\n<li>The tests in wave_gazebo_plugins are mostly empty placeholders as the majority of the code in the original versions tested the mesh based buoyancy code which has been removed (although tests to cover the remainder of the code would be good to have!).</li>\n</ol>\n<p>For the license change, I think the best way to manage that is for me to create a fork of my code matching this PR (including name changes etc.) and license the repository under Apache 2.  That gives VRX an original source to refer to with matching license details and I can add a comment regarding the reason for the split licenses (i.e. dependencies on GPL licenses components in the full version). I can post that to Bitbucket using mercurial as a VCS if that helps on your side.</p>", "type": "rendered"}, "created_on": "2019-03-11T15:31:14.326704+00:00", "user": {"display_name": "Rhys Mainwaring", "uuid": "{9184b840-45b4-4a22-beeb-4b26fd2aefa7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9184b840-45b4-4a22-beeb-4b26fd2aefa7%7D"}, "html": {"href": "https://bitbucket.org/%7B9184b840-45b4-4a22-beeb-4b26fd2aefa7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b05286fd06fe12fe4ba58def8232c9bbd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsRM-6.png"}}, "nickname": "srmainwaring", "type": "user", "account_id": "557058:0c1f87f0-68aa-40ef-84ee-7bd403c5c487"}, "updated_on": "2019-03-11T15:31:14.583336+00:00", "type": "pullrequest_comment", "id": 94518771}, {"links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/81/comments/94568528.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/81/_/diff#comment-94568528"}}, "parent": {"id": 94518771, "links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/81/comments/94518771.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/81/_/diff#comment-94518771"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 81, "links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/81.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/81"}}, "title": "Integrating new method for implementing visual and physical wave field."}, "content": {"raw": "I agree with the two points above and am happy to make the changes to this PR.  \n\nAs for the licensing change, I agree that a force of your original code would be great to provide heritage of the code.  I don\u2019t think the repository hosting or type \\(git or mercurial\\) is particularly important.  My understanding is that we would just refer to your fork in the code here \\(through links in the documentation and the source code, etc.\\)", "markup": "markdown", "html": "<p>I agree with the two points above and am happy to make the changes to this PR.  </p>\n<p>As for the licensing change, I agree that a force of your original code would be great to provide heritage of the code.  I don\u2019t think the repository hosting or type (git or mercurial) is particularly important.  My understanding is that we would just refer to your fork in the code here (through links in the documentation and the source code, etc.)</p>", "type": "rendered"}, "created_on": "2019-03-11T21:13:56.356546+00:00", "user": {"display_name": "Brian Bingham", "uuid": "{9cdea257-248f-486e-8858-49d8485a916f}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9cdea257-248f-486e-8858-49d8485a916f%7D"}, "html": {"href": "https://bitbucket.org/%7B9cdea257-248f-486e-8858-49d8485a916f%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6c52d6e5-77e0-41a8-8b6e-cb9462f4d5f1/7a690884-fc47-4bca-9c2b-baecee4d3dc9/128"}}, "nickname": "brian_bingham", "type": "user", "account_id": "557058:6c52d6e5-77e0-41a8-8b6e-cb9462f4d5f1"}, "updated_on": "2019-03-11T21:13:56.366484+00:00", "type": "pullrequest_comment", "id": 94568528}, {"links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/81/comments/94571741.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/81/_/diff#comment-94571741"}}, "parent": {"id": 94568528, "links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/81/comments/94568528.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/81/_/diff#comment-94568528"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 81, "links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/81.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/81"}}, "title": "Integrating new method for implementing visual and physical wave field."}, "content": {"raw": "I believe [f7a3304](#!/osrf/vrx/commits/f7a33047bbbd00314c330872eab7faa33e1aec34) takes care of the two suggestions above - removing box and wam-v models; and removing empty tests.\n\nI did leave the Wavefield\\_TEST.cc file intact.\n\nIf Rhys is alright with the changes, would recommend merging this PR.  Then we can consider the best time to merge the wave\\_visualization branch.", "markup": "markdown", "html": "<p>I believe <a data-is-external-link=\"true\" href=\"#!/osrf/vrx/commits/f7a33047bbbd00314c330872eab7faa33e1aec34\" rel=\"nofollow\">f7a3304</a> takes care of the two suggestions above - removing box and wam-v models; and removing empty tests.</p>\n<p>I did leave the Wavefield_TEST.cc file intact.</p>\n<p>If Rhys is alright with the changes, would recommend merging this PR.  Then we can consider the best time to merge the wave_visualization branch.</p>", "type": "rendered"}, "created_on": "2019-03-11T21:50:03.114234+00:00", "user": {"display_name": "Brian Bingham", "uuid": "{9cdea257-248f-486e-8858-49d8485a916f}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9cdea257-248f-486e-8858-49d8485a916f%7D"}, "html": {"href": "https://bitbucket.org/%7B9cdea257-248f-486e-8858-49d8485a916f%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6c52d6e5-77e0-41a8-8b6e-cb9462f4d5f1/7a690884-fc47-4bca-9c2b-baecee4d3dc9/128"}}, "nickname": "brian_bingham", "type": "user", "account_id": "557058:6c52d6e5-77e0-41a8-8b6e-cb9462f4d5f1"}, "updated_on": "2019-03-11T21:50:03.136456+00:00", "type": "pullrequest_comment", "id": 94571741}, {"links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/81/comments/94713873.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/81/_/diff#comment-94713873"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 81, "links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/81.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/81"}}, "title": "Integrating new method for implementing visual and physical wave field."}, "content": {"raw": "Thanks Brian. This looks good.", "markup": "markdown", "html": "<p>Thanks Brian. This looks good.</p>", "type": "rendered"}, "created_on": "2019-03-12T16:58:17.794530+00:00", "user": {"display_name": "Rhys Mainwaring", "uuid": "{9184b840-45b4-4a22-beeb-4b26fd2aefa7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9184b840-45b4-4a22-beeb-4b26fd2aefa7%7D"}, "html": {"href": "https://bitbucket.org/%7B9184b840-45b4-4a22-beeb-4b26fd2aefa7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/b05286fd06fe12fe4ba58def8232c9bbd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsRM-6.png"}}, "nickname": "srmainwaring", "type": "user", "account_id": "557058:0c1f87f0-68aa-40ef-84ee-7bd403c5c487"}, "updated_on": "2019-03-12T16:58:17.859972+00:00", "type": "pullrequest_comment", "id": 94713873}], "page": 1, "size": 5}