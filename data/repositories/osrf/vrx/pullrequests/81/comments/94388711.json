{"links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/81/comments/94388711.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/81/_/diff#comment-94388711"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 81, "links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/81.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/81"}}, "title": "Integrating new method for implementing visual and physical wave field."}, "content": {"raw": "I ran a few tests to verify the implementation.  The plots below compare three scenarios:\n\n1. The \u201cno sync\u201d case, which is the current default branch, where the visual and physical wave representation are independent.\n2. The \u201csync\\_flat\u201d case, which is the wave\\_visualization\\_integrated branch, where the visual and wave representation are linked.  For this test I hard coded source code in [Wavefield.cc](http://Wavefield.cc) so that it generates three individual wave components to match our default setup in [wamv\\_gazebo\\_dynamics\\_plugin.xacro](#!/osrf/vrx/src/default/wamv_gazebo/urdf/dynamics/wamv_gazebo_dynamics_plugin.xacro).\n3. The \u201csync\\_steep\u201d case is identical to 2, but I set the steepness to 1.0\n\nThe test is a 30 second simulation.  Then I post-process the WAM-V state information for position and attitude. \n\n![](data/bitbucket.org/repo/BgXLzgM/images/450212508-figure_1.png)\n\u200c\n\n![](data/bitbucket.org/repo/BgXLzgM/images/322809996-figure_2.png)\n\u200c\n\n![](data/bitbucket.org/repo/BgXLzgM/images/2962941573-figure_3.png)\nBased on the plots above\u2026\n\n* The two implementations appear to be equivalent from a induced vehicle motion standpoint, which is encouraging.\n* For this relatively benign seastate the steepness value has a negligible effect on vessel motion.  This suggests that it might be reasonable to use a zero steepness value for the physical waves, which would alleviate the need for the multidimensional root search for the wave height \\(see Newton\u2019s method solver in WaveSampler::ComputeDepthDirectly within [Wavefield.cc](http://Wavefield.cc)\\).  Currently this doesn\u2019t seem to be a problem, but as the models get complex this simplification may have computational advantages.  Would certainly want to test under other scenarios.\n\n", "markup": "markdown", "html": "<p>I ran a few tests to verify the implementation.  The plots below compare three scenarios:</p>\n<ol>\n<li>The \u201cno sync\u201d case, which is the current default branch, where the visual and physical wave representation are independent.</li>\n<li>The \u201csync_flat\u201d case, which is the wave_visualization_integrated branch, where the visual and wave representation are linked.  For this test I hard coded source code in <a data-is-external-link=\"true\" href=\"http://Wavefield.cc\" rel=\"nofollow\">Wavefield.cc</a> so that it generates three individual wave components to match our default setup in <a data-is-external-link=\"true\" href=\"#!/osrf/vrx/src/default/wamv_gazebo/urdf/dynamics/wamv_gazebo_dynamics_plugin.xacro\" rel=\"nofollow\">wamv_gazebo_dynamics_plugin.xacro</a>.</li>\n<li>The \u201csync_steep\u201d case is identical to 2, but I set the steepness to 1.0</li>\n</ol>\n<p>The test is a 30 second simulation.  Then I post-process the WAM-V state information for position and attitude. </p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/BgXLzgM/images/450212508-figure_1.png\" />\n\u200c</p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/BgXLzgM/images/322809996-figure_2.png\" />\n\u200c</p>\n<p><img alt=\"\" src=\"data/bitbucket.org/repo/BgXLzgM/images/2962941573-figure_3.png\" />\nBased on the plots above\u2026</p>\n<ul>\n<li>The two implementations appear to be equivalent from a induced vehicle motion standpoint, which is encouraging.</li>\n<li>For this relatively benign seastate the steepness value has a negligible effect on vessel motion.  This suggests that it might be reasonable to use a zero steepness value for the physical waves, which would alleviate the need for the multidimensional root search for the wave height (see Newton\u2019s method solver in WaveSampler::ComputeDepthDirectly within <a data-is-external-link=\"true\" href=\"http://Wavefield.cc\" rel=\"nofollow\">Wavefield.cc</a>).  Currently this doesn\u2019t seem to be a problem, but as the models get complex this simplification may have computational advantages.  Would certainly want to test under other scenarios.</li>\n</ul>", "type": "rendered"}, "created_on": "2019-03-09T01:58:45.532747+00:00", "user": {"display_name": "Brian Bingham", "uuid": "{9cdea257-248f-486e-8858-49d8485a916f}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B9cdea257-248f-486e-8858-49d8485a916f%7D"}, "html": {"href": "https://bitbucket.org/%7B9cdea257-248f-486e-8858-49d8485a916f%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6c52d6e5-77e0-41a8-8b6e-cb9462f4d5f1/7a690884-fc47-4bca-9c2b-baecee4d3dc9/128"}}, "nickname": "brian_bingham", "type": "user", "account_id": "557058:6c52d6e5-77e0-41a8-8b6e-cb9462f4d5f1"}, "updated_on": "2019-03-09T01:58:45.540046+00:00", "type": "pullrequest_comment", "id": 94388711}