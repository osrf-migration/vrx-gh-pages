{"links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/164/comments/113979090.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/164/_/diff#comment-113979090"}}, "parent": {"id": 113975629, "links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/164/comments/113975629.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/164/_/diff#comment-113975629"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 164, "links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/164.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/164"}}, "title": "namespace fix"}, "content": {"raw": "I was able to resolve the world issue by commenting out the changes like so. This should be resolved in another PR\n\n```\ndiff -r 6a3fbf97e42a vrx_gazebo/worlds/xacros/include_all_xacros.xacro\n--- a/vrx_gazebo/worlds/xacros/include_all_xacros.xacro Wed Aug 21 13:49:58 2019 -0600\n+++ b/vrx_gazebo/worlds/xacros/include_all_xacros.xacro Wed Aug 21 14:25:51 2019 -0700\n@@ -5,11 +5,11 @@\n     <xacro:include filename=\"$(find vrx_gazebo)/worlds/xacros/sandisland_minus_scene.xacro\" />\n     <xacro:include filename=\"$(find vrx_gazebo)/worlds/xacros/scene.xacro\" />\n     <xacro:include filename=\"$(find vrx_gazebo)/worlds/xacros/nav_challenge.xacro\" />\n-    <xacro:include filename=\"$(find vrx_gazebo)/worlds/xacros/light_buoy.xacro\" />\n+    <!-- <xacro:include filename=\"$(find vrx_gazebo)/worlds/xacros/light_buoy.xacro\" />\n     <xacro:include filename=\"$(find vrx_gazebo)/worlds/xacros/qualifying_pinger_transit_2016.xacro\" />\n     <xacro:include filename=\"$(find vrx_gazebo)/worlds/xacros/dock_2016.xacro\" />\n     <xacro:include filename=\"$(find vrx_gazebo)/worlds/xacros/dock_2018.xacro\" />\n-    <xacro:include filename=\"$(find vrx_gazebo)/worlds/xacros/scene_macro.xacro\" />\n+    <xacro:include filename=\"$(find vrx_gazebo)/worlds/xacros/scene_macro.xacro\" /> -->\n     <xacro:include filename=\"$(find vrx_gazebo)/worlds/xacros/usv_wind_plugin.xacro\" />\n     <xacro:include filename=\"$(find wave_gazebo)/world_models/ocean_waves/model.xacro\"/>\n     <xacro:include filename=\"$(find vrx_gazebo)/worlds/xacros/perception.xacro\" />\n```\n\nUnfortunately, I could not get the namespace working with the spawn using `gz`. I tried the following:\n\n```\ndiff -r 6a3fbf97e42a vrx_gazebo/launch/sandisland.launch\n--- a/vrx_gazebo/launch/sandisland.launch       Wed Aug 21 13:49:58 2019 -0600\n+++ b/vrx_gazebo/launch/sandisland.launch       Wed Aug 21 14:25:51 2019 -0700\n@@ -52,7 +52,7 @@\n\n   <!-- Load robot model -->\n   <arg name=\"urdf\" default=\"$(find wamv_gazebo)/urdf/wamv_gazebo.urdf.xacro\"/>\n-  <param name=\"robot_description\"\n+  <param name=\"wamv/robot_description\"\n          command=\"$(find xacro)/xacro &#x002D;&#x002D;inorder '$(arg urdf)'\n          thruster_config:=$(arg thrust_config)\n          camera_enabled:=$(arg camera_enabled)\n@@ -65,9 +65,9 @@\n   <node name=\"spawn_model\" pkg=\"gazebo_ros\" type=\"spawn_model\" if=\"$(arg non_competition_mode)\"\n         args=\"-x $(arg x) -y $(arg y) -z $(arg z)\n               -R $(arg R) -P $(arg P) -Y $(arg Y)\n-              -urdf -param robot_description -model wamv\"/>\n+              -urdf -param wamv/robot_description -model wamv -robot_namespace wamv\"/>\n\n-  <node name=\"spawn_wamv\" pkg=\"vrx_gazebo\" type=\"spawn_wamv.bash\" unless=\"$(arg non_competition_mode)\"\n+  <node ns=\"wamv\" name=\"spawn_wamv\" pkg=\"vrx_gazebo\" type=\"spawn_wamv.bash\" unless=\"$(arg non_competition_mode)\"\n         args=\"-x $(arg x) -y $(arg y) -z $(arg z)\n               -R $(arg R) -P $(arg P) -Y $(arg Y)\n               --urdf $(arg urdf) --model wamv\"/>\n```\n\nI tried either:\n\n1. Adding `ns=\"wamv\"` to the node that calls spawn\\_wamv.bash\n2. Adding `<group ns=\"wamv\">...</group>` around the node\n3. Looking for parameters to set the namespace from `gz model`, to no success \\(eg. -n does not work\\)\n\nI believe this is a missing feature in gazebo. I cannot get the `/wamv` namespace at the beginning of the rostopics associated with the wamv through this. What do you think about this?\n\n\u200c\n\n`mkdir -p ~/my_worlds/world_xacros` `mkdir -p ~/my_worlds/worlds` `roslaunch vrx_gazebo generate_worlds.launch requested:=$HOME/vrx_ws/src/vrx/vrx_gazebo/worlds/yamls/dock_shallow.yaml world_xacro_target:=$HOME/my_worlds/world_xacros/ world_target:=$HOME/my_worlds/worlds/` `roslaunch vrx_gazebo generate_wamv.launch wamv_target:=$HOME/my_urdf_3.urdf` \n\nThen compare: \n\n`roslaunch vrx_gazebo dock.launch`\n\n```\n\u279c  vrx_ws rostopic list\n/wamv/joint_states\n/wamv/sensors/cameras/far_left_camera/camera_info\n(etc.)\n```\n\n`roslaunch vrx_gazebo sandisland.launch world:=$HOME/my_worlds/worlds/dock_shallow0.world urdf:=$HOME/my_urdf_3.urdf non_competition_mode:=false`   \n\n```\n\u279c  vrx_ws rostopic list\n/joint_states\n/sensors/cameras/far_left_camera/camera_info\n(etc.)\n```\n\nWith the above changes, I get `roslaunch vrx_gazebo sandisland.launch world:=$HOME/my_worlds/worlds/dock_shallow0.world urdf:=$HOME/my_urdf_3.urdf ` working easily, but trying to use `gz`, I could not", "markup": "markdown", "html": "<p>I was able to resolve the world issue by commenting out the changes like so. This should be resolved in another PR</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 6a3fbf97e42a vrx_gazebo/worlds/xacros/include_all_xacros.xacro</span>\n<span class=\"gd\">--- a/vrx_gazebo/worlds/xacros/include_all_xacros.xacro Wed Aug 21 13:49:58 2019 -0600</span>\n<span class=\"gi\">+++ b/vrx_gazebo/worlds/xacros/include_all_xacros.xacro Wed Aug 21 14:25:51 2019 -0700</span>\n<span class=\"gu\">@@ -5,11 +5,11 @@</span>\n     &lt;xacro:include filename=&quot;$(find vrx_gazebo)/worlds/xacros/sandisland_minus_scene.xacro&quot; /&gt;\n     &lt;xacro:include filename=&quot;$(find vrx_gazebo)/worlds/xacros/scene.xacro&quot; /&gt;\n     &lt;xacro:include filename=&quot;$(find vrx_gazebo)/worlds/xacros/nav_challenge.xacro&quot; /&gt;\n<span class=\"gd\">-    &lt;xacro:include filename=&quot;$(find vrx_gazebo)/worlds/xacros/light_buoy.xacro&quot; /&gt;</span>\n<span class=\"gi\">+    &lt;!-- &lt;xacro:include filename=&quot;$(find vrx_gazebo)/worlds/xacros/light_buoy.xacro&quot; /&gt;</span>\n     &lt;xacro:include filename=&quot;$(find vrx_gazebo)/worlds/xacros/qualifying_pinger_transit_2016.xacro&quot; /&gt;\n     &lt;xacro:include filename=&quot;$(find vrx_gazebo)/worlds/xacros/dock_2016.xacro&quot; /&gt;\n     &lt;xacro:include filename=&quot;$(find vrx_gazebo)/worlds/xacros/dock_2018.xacro&quot; /&gt;\n<span class=\"gd\">-    &lt;xacro:include filename=&quot;$(find vrx_gazebo)/worlds/xacros/scene_macro.xacro&quot; /&gt;</span>\n<span class=\"gi\">+    &lt;xacro:include filename=&quot;$(find vrx_gazebo)/worlds/xacros/scene_macro.xacro&quot; /&gt; --&gt;</span>\n     &lt;xacro:include filename=&quot;$(find vrx_gazebo)/worlds/xacros/usv_wind_plugin.xacro&quot; /&gt;\n     &lt;xacro:include filename=&quot;$(find wave_gazebo)/world_models/ocean_waves/model.xacro&quot;/&gt;\n     &lt;xacro:include filename=&quot;$(find vrx_gazebo)/worlds/xacros/perception.xacro&quot; /&gt;\n</pre></div>\n\n\n<p>Unfortunately, I could not get the namespace working with the spawn using <code>gz</code>. I tried the following:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"gh\">diff -r 6a3fbf97e42a vrx_gazebo/launch/sandisland.launch</span>\n<span class=\"gd\">--- a/vrx_gazebo/launch/sandisland.launch       Wed Aug 21 13:49:58 2019 -0600</span>\n<span class=\"gi\">+++ b/vrx_gazebo/launch/sandisland.launch       Wed Aug 21 14:25:51 2019 -0700</span>\n<span class=\"gu\">@@ -52,7 +52,7 @@</span>\n\n   &lt;!-- Load robot model --&gt;\n   &lt;arg name=&quot;urdf&quot; default=&quot;$(find wamv_gazebo)/urdf/wamv_gazebo.urdf.xacro&quot;/&gt;\n<span class=\"gd\">-  &lt;param name=&quot;robot_description&quot;</span>\n<span class=\"gi\">+  &lt;param name=&quot;wamv/robot_description&quot;</span>\n          command=&quot;$(find xacro)/xacro &amp;#x002D;&amp;#x002D;inorder &#39;$(arg urdf)&#39;\n          thruster_config:=$(arg thrust_config)\n          camera_enabled:=$(arg camera_enabled)\n<span class=\"gu\">@@ -65,9 +65,9 @@</span>\n   &lt;node name=&quot;spawn_model&quot; pkg=&quot;gazebo_ros&quot; type=&quot;spawn_model&quot; if=&quot;$(arg non_competition_mode)&quot;\n         args=&quot;-x $(arg x) -y $(arg y) -z $(arg z)\n               -R $(arg R) -P $(arg P) -Y $(arg Y)\n<span class=\"gd\">-              -urdf -param robot_description -model wamv&quot;/&gt;</span>\n<span class=\"gi\">+              -urdf -param wamv/robot_description -model wamv -robot_namespace wamv&quot;/&gt;</span>\n\n<span class=\"gd\">-  &lt;node name=&quot;spawn_wamv&quot; pkg=&quot;vrx_gazebo&quot; type=&quot;spawn_wamv.bash&quot; unless=&quot;$(arg non_competition_mode)&quot;</span>\n<span class=\"gi\">+  &lt;node ns=&quot;wamv&quot; name=&quot;spawn_wamv&quot; pkg=&quot;vrx_gazebo&quot; type=&quot;spawn_wamv.bash&quot; unless=&quot;$(arg non_competition_mode)&quot;</span>\n         args=&quot;-x $(arg x) -y $(arg y) -z $(arg z)\n               -R $(arg R) -P $(arg P) -Y $(arg Y)\n               --urdf $(arg urdf) --model wamv&quot;/&gt;\n</pre></div>\n\n\n<p>I tried either:</p>\n<ol>\n<li>Adding <code>ns=\"wamv\"</code> to the node that calls spawn_wamv.bash</li>\n<li>Adding <code>&lt;group ns=\"wamv\"&gt;...&lt;/group&gt;</code> around the node</li>\n<li>Looking for parameters to set the namespace from <code>gz model</code>, to no success (eg. -n does not work)</li>\n</ol>\n<p>I believe this is a missing feature in gazebo. I cannot get the <code>/wamv</code> namespace at the beginning of the rostopics associated with the wamv through this. What do you think about this?</p>\n<p>\u200c</p>\n<p><code>mkdir -p ~/my_worlds/world_xacros</code> <code>mkdir -p ~/my_worlds/worlds</code> <code>roslaunch vrx_gazebo generate_worlds.launch requested:=$HOME/vrx_ws/src/vrx/vrx_gazebo/worlds/yamls/dock_shallow.yaml world_xacro_target:=$HOME/my_worlds/world_xacros/ world_target:=$HOME/my_worlds/worlds/</code> <code>roslaunch vrx_gazebo generate_wamv.launch wamv_target:=$HOME/my_urdf_3.urdf</code> </p>\n<p>Then compare: </p>\n<p><code>roslaunch vrx_gazebo dock.launch</code></p>\n<div class=\"codehilite\"><pre><span></span>\u279c  vrx_ws rostopic list\n/wamv/joint_states\n/wamv/sensors/cameras/far_left_camera/camera_info\n(etc.)\n</pre></div>\n\n\n<p><code>roslaunch vrx_gazebo sandisland.launch world:=$HOME/my_worlds/worlds/dock_shallow0.world urdf:=$HOME/my_urdf_3.urdf non_competition_mode:=false</code>   </p>\n<div class=\"codehilite\"><pre><span></span>\u279c  vrx_ws rostopic list\n/joint_states\n/sensors/cameras/far_left_camera/camera_info\n(etc.)\n</pre></div>\n\n\n<p>With the above changes, I get <code>roslaunch vrx_gazebo sandisland.launch world:=$HOME/my_worlds/worlds/dock_shallow0.world urdf:=$HOME/my_urdf_3.urdf</code> working easily, but trying to use <code>gz</code>, I could not</p>", "type": "rendered"}, "created_on": "2019-08-21T21:29:03.861952+00:00", "user": {"display_name": "Tyler Lum", "uuid": "{305d9368-23ba-4f72-b1d4-7d17d2a062d8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B305d9368-23ba-4f72-b1d4-7d17d2a062d8%7D"}, "html": {"href": "https://bitbucket.org/%7B305d9368-23ba-4f72-b1d4-7d17d2a062d8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5b96b66385af94340e7cabce/b8bb780f-62b7-47f8-9d03-ee65c7d17ad4/128"}}, "nickname": "tylerlum", "type": "user", "account_id": "5b96b66385af94340e7cabce"}, "updated_on": "2019-08-21T21:36:05.770023+00:00", "type": "pullrequest_comment", "id": 113979090}