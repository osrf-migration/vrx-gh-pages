{"links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/151/comments/110594326.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/151/_/diff#comment-110594326"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 151, "links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/151.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/151"}}, "title": "nodes now shutdown and use safe_yaml"}, "content": {"raw": "This PR is so wonderful haha.\n\n\u200c\n\n**Original**\n\n```\n\u279c  [Wed Jul 24 17:12:16 PDT 2019] vrx_ws hg update defaul\n\u279c  [Wed Jul 24 17:12:18 PDT 2019] vrx_ws cd src/vrx\n\u279c  [Wed Jul 24 17:12:22 PDT 2019] vrx hg update default\n6 files updated, 0 files merged, 0 files removed, 0 files unresolved\n\u279c  [Wed Jul 24 17:12:26 PDT 2019] vrx roslaunch vrx_gazebo generate_wamv.launch thruster_yaml:=/home/tylerlum/my_wamv/thruster_config.yaml sensor_yaml:=/home/tylerlum/my_wamv/sensor_config.yaml wamv_target:=/home/tylerlum/my_wamv/my_wamv_3.urdf\n... logging to /home/tylerlum/.ros/log/e35a89d8-ae70-11e9-9781-985fd3e41ed0/roslaunch-tylerlum-Surface-Pro-4-24759.log\nChecking log directory for disk usage. This may take awhile.\nPress Ctrl-C to interrupt\nDone checking log file disk usage. Usage is <1GB.\n\nstarted roslaunch server http://tylerlum-Surface-Pro-4:35895/\n\nSUMMARY\n========\n\nPARAMETERS\n * /rosdistro: melodic\n * /rosversion: 1.14.3\n * /wamv_config/compliance_dir: /home/tylerlum/vr...\n * /wamv_config/sensor_yaml: /home/tylerlum/my...\n * /wamv_config/sensors_dir: /home/tylerlum/vr...\n * /wamv_config/thruster_yaml: /home/tylerlum/my...\n * /wamv_config/thrusters_dir: /home/tylerlum/vr...\n * /wamv_config/wamv_gazebo: /home/tylerlum/vr...\n * /wamv_config/wamv_target: /home/tylerlum/my...\n\nNODES\n  /wamv_config/\n    wamv_generator (vrx_gazebo/generate_wamv)\n\nauto-starting new master\nprocess[master]: started with pid [24769]\nROS_MASTER_URI=http://localhost:11311\n\nsetting /run_id to e35a89d8-ae70-11e9-9781-985fd3e41ed0\nprocess[rosout-1]: started with pid [24780]\nstarted core service [/rosout]\nprocess[wamv_config/wamv_generator-2]: started with pid [24787]\n[INFO] [1564013549.734863]: \nUsing /home/tylerlum/my_wamv/thruster_config.yaml as the thruster configuration yaml file\n\n/home/tylerlum/vrx_ws/src/vrx/vrx_gazebo/src/vrx_gazebo_python/generator_scripts/wamv_config/compliance.py:171: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\n  box_def = yaml.load(open(addrs))\n/home/tylerlum/vrx_ws/src/vrx/vrx_gazebo/src/vrx_gazebo_python/generator_scripts/wamv_config/compliance.py:78: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\n  'thruster_compliance/numeric.yaml'))\n/home/tylerlum/vrx_ws/src/vrx/vrx_gazebo/src/vrx_gazebo_python/generator_scripts/utils.py:38: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\n  requested_macros = yaml.load(s)\n[ERROR] [1564013549.758474]: engine second_right is out of bounds\n[ERROR] [1564013549.760681]: engine second_right is at xyz=(-2.373776, -1.027135, 0.318237), it must fit in at least one of the following boxes with remaining space:\n[ERROR] [1564013549.762654]:   <Box name:thruster_compliance_port_aft x:[-1.75, -2.75] y:[1.5,0.5] z:[0.6,-0.6]                remaining_space:0>\n[ERROR] [1564013549.764705]:   <Box name:thruster_compliance_star_for x:[1.5, 0.5] y:[-0.5,-1.5] z:[0.6,-0.6]                remaining_space:1>\n[ERROR] [1564013549.766706]:   <Box name:thruster_compliance_port_for x:[1.5, 0.5] y:[1.5,0.5] z:[0.6,-0.6]                remaining_space:1>\n[ERROR] [1564013549.768568]:   <Box name:thruster_compliance_star_aft x:[-1.75, -2.75] y:[-0.5,-1.5] z:[0.6,-0.6]                remaining_space:0>\n[ERROR] [1564013549.770392]:   <Box name:thruster_compliance_middle x:[1.5, -1.0] y:[0.5,-0.5] z:[0.6,-0.6]                remaining_space:1>\n/home/tylerlum/vrx_ws/src/vrx/vrx_gazebo/src/vrx_gazebo_python/generator_scripts/utils.py:96: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\n  requested_macros = yaml.load(s)\n[INFO] [1564013549.775510]: \nUsing /home/tylerlum/my_wamv/sensor_config.yaml as the sensor configuration yaml file\n\n/home/tylerlum/vrx_ws/src/vrx/vrx_gazebo/src/vrx_gazebo_python/generator_scripts/wamv_config/compliance.py:17: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\n  'sensor_compliance/numeric.yaml'))\n[ERROR] [1564013549.787576]: Too many wamv_camera requested\n[ERROR] [1564013549.788561]:   maximum of 3 wamv_camera allowed\nxacro: in-order processing became default in ROS Melodic. You can drop the option.\n\n[ERROR] [1564013550.488582]: \nThis sensor/thruster configuration is NOT compliant with the (current) VRX constraints. A urdf file will be created, but please note that the above errors must be fixed for this to be a valid configuration for the VRX competition.\n\nWAM-V urdf file sucessfully generated. File location: /home/tylerlum/my_wamv/my_wamv_3.urdf\n[wamv_config/wamv_generator-2] process has finished cleanly\nlog file: /home/tylerlum/.ros/log/e35a89d8-ae70-11e9-9781-985fd3e41ed0/wamv_config-wamv_generator-2*.log\n```\n\n\u200c\n\n**New**\n\n```\n\u279c  [Wed Jul 24 17:10:19 PDT 2019] vrx_ws roslaunch vrx_gazebo generate_wamv.launch thruster_yaml:=/home/tylerlum/my_wamv/thruster_config.yaml sensor_yaml:=/home/tylerlum/my_wamv/sensor_config.yaml wamv_target:=/home/tylerlum/my_wamv/my_wamv_3.urdf\n... logging to /home/tylerlum/.ros/log/9b7c4462-ae70-11e9-9781-985fd3e41ed0/roslaunch-tylerlum-Surface-Pro-4-24143.log\nChecking log directory for disk usage. This may take awhile.\nPress Ctrl-C to interrupt\nDone checking log file disk usage. Usage is <1GB.\n\nstarted roslaunch server http://tylerlum-Surface-Pro-4:44165/\n\nSUMMARY\n========\n\nPARAMETERS\n * /rosdistro: melodic\n * /rosversion: 1.14.3\n * /wamv_config/compliance_dir: /home/tylerlum/vr...\n * /wamv_config/sensor_yaml: /home/tylerlum/my...\n * /wamv_config/sensors_dir: /home/tylerlum/vr...\n * /wamv_config/thruster_yaml: /home/tylerlum/my...\n * /wamv_config/thrusters_dir: /home/tylerlum/vr...\n * /wamv_config/wamv_gazebo: /home/tylerlum/vr...\n * /wamv_config/wamv_target: /home/tylerlum/my...\n\nNODES\n  /wamv_config/\n    wamv_generator (vrx_gazebo/generate_wamv)\n\nauto-starting new master\nprocess[master]: started with pid [24153]\nROS_MASTER_URI=http://localhost:11311\n\nsetting /run_id to 9b7c4462-ae70-11e9-9781-985fd3e41ed0\nprocess[rosout-1]: started with pid [24164]\nstarted core service [/rosout]\nprocess[wamv_config/wamv_generator-2]: started with pid [24171]\n[INFO] [1564013429.165872]: \nUsing /home/tylerlum/my_wamv/thruster_config.yaml as the thruster configuration yaml file\n\n[ERROR] [1564013429.197234]: engine second_right is out of bounds\n[ERROR] [1564013429.200493]: engine second_right is at xyz=(-2.373776, -1.027135, 0.318237), it must fit in at least one of the following boxes with remaining space:\n[ERROR] [1564013429.205415]:   <Box name:thruster_compliance_port_aft x:[-1.75, -2.75] y:[1.5,0.5] z:[0.6,-0.6]                remaining_space:0>\n[ERROR] [1564013429.209114]:   <Box name:thruster_compliance_star_for x:[1.5, 0.5] y:[-0.5,-1.5] z:[0.6,-0.6]                remaining_space:1>\n[ERROR] [1564013429.212654]:   <Box name:thruster_compliance_port_for x:[1.5, 0.5] y:[1.5,0.5] z:[0.6,-0.6]                remaining_space:1>\n[ERROR] [1564013429.217593]:   <Box name:thruster_compliance_star_aft x:[-1.75, -2.75] y:[-0.5,-1.5] z:[0.6,-0.6]                remaining_space:0>\n[ERROR] [1564013429.220320]:   <Box name:thruster_compliance_middle x:[1.5, -1.0] y:[0.5,-0.5] z:[0.6,-0.6]                remaining_space:1>\n[INFO] [1564013429.231470]: \nUsing /home/tylerlum/my_wamv/sensor_config.yaml as the sensor configuration yaml file\n\n[ERROR] [1564013429.258270]: Too many wamv_camera requested\n[ERROR] [1564013429.259645]:   maximum of 3 wamv_camera allowed\nxacro: in-order processing became default in ROS Melodic. You can drop the option.\n\n[ERROR] [1564013429.962023]: \nThis sensor/thruster configuration is NOT compliant with the (current) VRX constraints. A urdf file will be created, but please note that the above errors must be fixed for this to be a valid configuration for the VRX competition.\n\nWAM-V urdf file sucessfully generated. File location: /home/tylerlum/my_wamv/my_wamv_3.urdf\n================================================================================REQUIRED process [wamv_config/wamv_generator-2] has died!\nprocess has finished cleanly\nlog file: /home/tylerlum/.ros/log/9b7c4462-ae70-11e9-9781-985fd3e41ed0/wamv_config-wamv_generator-2*.log\nInitiating shutdown!\n================================================================================\n[wamv_config/wamv_generator-2] killing on exit\n[rosout-1] killing on exit\n[master] killing on exit\nshutting down processing monitor...\n... shutting down processing monitor complete\ndone\n\u279c  [Wed Jul 24 17:10:30 PDT 2019] vrx_ws echo $?\n0\n```\n\nI\u2019m just gonna merge it.", "markup": "markdown", "html": "<p>This PR is so wonderful haha.</p>\n<p>\u200c</p>\n<p><strong>Original</strong></p>\n<div class=\"codehilite\"><pre><span></span>\u279c  [Wed Jul 24 17:12:16 PDT 2019] vrx_ws hg update defaul\n\u279c  [Wed Jul 24 17:12:18 PDT 2019] vrx_ws cd src/vrx\n\u279c  [Wed Jul 24 17:12:22 PDT 2019] vrx hg update default\n6 files updated, 0 files merged, 0 files removed, 0 files unresolved\n\u279c  [Wed Jul 24 17:12:26 PDT 2019] vrx roslaunch vrx_gazebo generate_wamv.launch thruster_yaml:=/home/tylerlum/my_wamv/thruster_config.yaml sensor_yaml:=/home/tylerlum/my_wamv/sensor_config.yaml wamv_target:=/home/tylerlum/my_wamv/my_wamv_3.urdf\n... logging to /home/tylerlum/.ros/log/e35a89d8-ae70-11e9-9781-985fd3e41ed0/roslaunch-tylerlum-Surface-Pro-4-24759.log\nChecking log directory for disk usage. This may take awhile.\nPress Ctrl-C to interrupt\nDone checking log file disk usage. Usage is &lt;1GB.\n\nstarted roslaunch server http://tylerlum-Surface-Pro-4:35895/\n\nSUMMARY\n========\n\nPARAMETERS\n * /rosdistro: melodic\n * /rosversion: 1.14.3\n * /wamv_config/compliance_dir: /home/tylerlum/vr...\n * /wamv_config/sensor_yaml: /home/tylerlum/my...\n * /wamv_config/sensors_dir: /home/tylerlum/vr...\n * /wamv_config/thruster_yaml: /home/tylerlum/my...\n * /wamv_config/thrusters_dir: /home/tylerlum/vr...\n * /wamv_config/wamv_gazebo: /home/tylerlum/vr...\n * /wamv_config/wamv_target: /home/tylerlum/my...\n\nNODES\n  /wamv_config/\n    wamv_generator (vrx_gazebo/generate_wamv)\n\nauto-starting new master\nprocess[master]: started with pid [24769]\nROS_MASTER_URI=http://localhost:11311\n\nsetting /run_id to e35a89d8-ae70-11e9-9781-985fd3e41ed0\nprocess[rosout-1]: started with pid [24780]\nstarted core service [/rosout]\nprocess[wamv_config/wamv_generator-2]: started with pid [24787]\n[INFO] [1564013549.734863]: \nUsing /home/tylerlum/my_wamv/thruster_config.yaml as the thruster configuration yaml file\n\n/home/tylerlum/vrx_ws/src/vrx/vrx_gazebo/src/vrx_gazebo_python/generator_scripts/wamv_config/compliance.py:171: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\n  box_def = yaml.load(open(addrs))\n/home/tylerlum/vrx_ws/src/vrx/vrx_gazebo/src/vrx_gazebo_python/generator_scripts/wamv_config/compliance.py:78: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\n  &#39;thruster_compliance/numeric.yaml&#39;))\n/home/tylerlum/vrx_ws/src/vrx/vrx_gazebo/src/vrx_gazebo_python/generator_scripts/utils.py:38: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\n  requested_macros = yaml.load(s)\n[ERROR] [1564013549.758474]: engine second_right is out of bounds\n[ERROR] [1564013549.760681]: engine second_right is at xyz=(-2.373776, -1.027135, 0.318237), it must fit in at least one of the following boxes with remaining space:\n[ERROR] [1564013549.762654]:   &lt;Box name:thruster_compliance_port_aft x:[-1.75, -2.75] y:[1.5,0.5] z:[0.6,-0.6]                remaining_space:0&gt;\n[ERROR] [1564013549.764705]:   &lt;Box name:thruster_compliance_star_for x:[1.5, 0.5] y:[-0.5,-1.5] z:[0.6,-0.6]                remaining_space:1&gt;\n[ERROR] [1564013549.766706]:   &lt;Box name:thruster_compliance_port_for x:[1.5, 0.5] y:[1.5,0.5] z:[0.6,-0.6]                remaining_space:1&gt;\n[ERROR] [1564013549.768568]:   &lt;Box name:thruster_compliance_star_aft x:[-1.75, -2.75] y:[-0.5,-1.5] z:[0.6,-0.6]                remaining_space:0&gt;\n[ERROR] [1564013549.770392]:   &lt;Box name:thruster_compliance_middle x:[1.5, -1.0] y:[0.5,-0.5] z:[0.6,-0.6]                remaining_space:1&gt;\n/home/tylerlum/vrx_ws/src/vrx/vrx_gazebo/src/vrx_gazebo_python/generator_scripts/utils.py:96: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\n  requested_macros = yaml.load(s)\n[INFO] [1564013549.775510]: \nUsing /home/tylerlum/my_wamv/sensor_config.yaml as the sensor configuration yaml file\n\n/home/tylerlum/vrx_ws/src/vrx/vrx_gazebo/src/vrx_gazebo_python/generator_scripts/wamv_config/compliance.py:17: YAMLLoadWarning: calling yaml.load() without Loader=... is deprecated, as the default Loader is unsafe. Please read https://msg.pyyaml.org/load for full details.\n  &#39;sensor_compliance/numeric.yaml&#39;))\n[ERROR] [1564013549.787576]: Too many wamv_camera requested\n[ERROR] [1564013549.788561]:   maximum of 3 wamv_camera allowed\nxacro: in-order processing became default in ROS Melodic. You can drop the option.\n\n[ERROR] [1564013550.488582]: \nThis sensor/thruster configuration is NOT compliant with the (current) VRX constraints. A urdf file will be created, but please note that the above errors must be fixed for this to be a valid configuration for the VRX competition.\n\nWAM-V urdf file sucessfully generated. File location: /home/tylerlum/my_wamv/my_wamv_3.urdf\n[wamv_config/wamv_generator-2] process has finished cleanly\nlog file: /home/tylerlum/.ros/log/e35a89d8-ae70-11e9-9781-985fd3e41ed0/wamv_config-wamv_generator-2*.log\n</pre></div>\n\n\n<p>\u200c</p>\n<p><strong>New</strong></p>\n<div class=\"codehilite\"><pre><span></span>\u279c  [Wed Jul 24 17:10:19 PDT 2019] vrx_ws roslaunch vrx_gazebo generate_wamv.launch thruster_yaml:=/home/tylerlum/my_wamv/thruster_config.yaml sensor_yaml:=/home/tylerlum/my_wamv/sensor_config.yaml wamv_target:=/home/tylerlum/my_wamv/my_wamv_3.urdf\n... logging to /home/tylerlum/.ros/log/9b7c4462-ae70-11e9-9781-985fd3e41ed0/roslaunch-tylerlum-Surface-Pro-4-24143.log\nChecking log directory for disk usage. This may take awhile.\nPress Ctrl-C to interrupt\nDone checking log file disk usage. Usage is &lt;1GB.\n\nstarted roslaunch server http://tylerlum-Surface-Pro-4:44165/\n\nSUMMARY\n========\n\nPARAMETERS\n * /rosdistro: melodic\n * /rosversion: 1.14.3\n * /wamv_config/compliance_dir: /home/tylerlum/vr...\n * /wamv_config/sensor_yaml: /home/tylerlum/my...\n * /wamv_config/sensors_dir: /home/tylerlum/vr...\n * /wamv_config/thruster_yaml: /home/tylerlum/my...\n * /wamv_config/thrusters_dir: /home/tylerlum/vr...\n * /wamv_config/wamv_gazebo: /home/tylerlum/vr...\n * /wamv_config/wamv_target: /home/tylerlum/my...\n\nNODES\n  /wamv_config/\n    wamv_generator (vrx_gazebo/generate_wamv)\n\nauto-starting new master\nprocess[master]: started with pid [24153]\nROS_MASTER_URI=http://localhost:11311\n\nsetting /run_id to 9b7c4462-ae70-11e9-9781-985fd3e41ed0\nprocess[rosout-1]: started with pid [24164]\nstarted core service [/rosout]\nprocess[wamv_config/wamv_generator-2]: started with pid [24171]\n[INFO] [1564013429.165872]: \nUsing /home/tylerlum/my_wamv/thruster_config.yaml as the thruster configuration yaml file\n\n[ERROR] [1564013429.197234]: engine second_right is out of bounds\n[ERROR] [1564013429.200493]: engine second_right is at xyz=(-2.373776, -1.027135, 0.318237), it must fit in at least one of the following boxes with remaining space:\n[ERROR] [1564013429.205415]:   &lt;Box name:thruster_compliance_port_aft x:[-1.75, -2.75] y:[1.5,0.5] z:[0.6,-0.6]                remaining_space:0&gt;\n[ERROR] [1564013429.209114]:   &lt;Box name:thruster_compliance_star_for x:[1.5, 0.5] y:[-0.5,-1.5] z:[0.6,-0.6]                remaining_space:1&gt;\n[ERROR] [1564013429.212654]:   &lt;Box name:thruster_compliance_port_for x:[1.5, 0.5] y:[1.5,0.5] z:[0.6,-0.6]                remaining_space:1&gt;\n[ERROR] [1564013429.217593]:   &lt;Box name:thruster_compliance_star_aft x:[-1.75, -2.75] y:[-0.5,-1.5] z:[0.6,-0.6]                remaining_space:0&gt;\n[ERROR] [1564013429.220320]:   &lt;Box name:thruster_compliance_middle x:[1.5, -1.0] y:[0.5,-0.5] z:[0.6,-0.6]                remaining_space:1&gt;\n[INFO] [1564013429.231470]: \nUsing /home/tylerlum/my_wamv/sensor_config.yaml as the sensor configuration yaml file\n\n[ERROR] [1564013429.258270]: Too many wamv_camera requested\n[ERROR] [1564013429.259645]:   maximum of 3 wamv_camera allowed\nxacro: in-order processing became default in ROS Melodic. You can drop the option.\n\n[ERROR] [1564013429.962023]: \nThis sensor/thruster configuration is NOT compliant with the (current) VRX constraints. A urdf file will be created, but please note that the above errors must be fixed for this to be a valid configuration for the VRX competition.\n\nWAM-V urdf file sucessfully generated. File location: /home/tylerlum/my_wamv/my_wamv_3.urdf\n================================================================================REQUIRED process [wamv_config/wamv_generator-2] has died!\nprocess has finished cleanly\nlog file: /home/tylerlum/.ros/log/9b7c4462-ae70-11e9-9781-985fd3e41ed0/wamv_config-wamv_generator-2*.log\nInitiating shutdown!\n================================================================================\n[wamv_config/wamv_generator-2] killing on exit\n[rosout-1] killing on exit\n[master] killing on exit\nshutting down processing monitor...\n... shutting down processing monitor complete\ndone\n\u279c  [Wed Jul 24 17:10:30 PDT 2019] vrx_ws echo $?\n0\n</pre></div>\n\n\n<p>I\u2019m just gonna merge it.</p>", "type": "rendered"}, "created_on": "2019-07-25T00:14:20.525192+00:00", "user": {"display_name": "Tyler Lum", "uuid": "{305d9368-23ba-4f72-b1d4-7d17d2a062d8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B305d9368-23ba-4f72-b1d4-7d17d2a062d8%7D"}, "html": {"href": "https://bitbucket.org/%7B305d9368-23ba-4f72-b1d4-7d17d2a062d8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5b96b66385af94340e7cabce/b8bb780f-62b7-47f8-9d03-ee65c7d17ad4/128"}}, "nickname": "tylerlum", "type": "user", "account_id": "5b96b66385af94340e7cabce"}, "updated_on": "2019-07-25T00:14:20.535532+00:00", "type": "pullrequest_comment", "id": 110594326}