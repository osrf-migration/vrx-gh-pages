{"links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/104/comments/104704403.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/104/_/diff#comment-104704403"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 104, "links": {"self": {"href": "data/repositories/osrf/vrx/pullrequests/104.json"}, "html": {"href": "#!/osrf/vrx/pull-requests/104"}}, "title": "Issue#97 yaml thruster configuration"}, "content": {"raw": "I have a question about `wamv_gazebo.xacro`.\n\n**Current: wamv\\_gazebo.xacro**\n\n```\n<?xml version=\"1.0\"?>\n<robot xmlns:xacro=\"http://ros.org/wiki/xacro\">\n  <!-- Macro to create a WAM-V with dyanmics plugins and a customizeable thruster layout -->\n  <xacro:macro  name=\"wamv_gazebo\" params=\"thruster_layout\">\n    <!-- Include macros for dynamics plugins -->\n    <xacro:include filename=\"$(find wamv_gazebo)/urdf/macros.xacro\" />\n    <!-- Defines the base vehicle -->\n    <xacro:include filename=\"$(find wamv_description)/urdf/wamv_base.urdf.xacro\" />\n    <!-- Thruster Layout -->\n    <xacro:include filename=\"${thruster_layout}\"/>\n    <!-- Attach hydrodynamics plugin -->\n    <xacro:usv_dynamics_gazebo name=\"wamv_dynamics_plugin\"/>\n    <!-- Attach wind plugin -->\n    <xacro:usv_wind_gazebo name=\"wamv_wind_plugin\"/>\n  </xacro:macro>\n</robot>\n```\n\nIs there a reason that the `wamv_gazebo` macro is defined this way? It definitely works, but I thought that it might be cleaner to have something like\n\n**Alternative file idea: wamv\\_gazebo\\_plugins.xacro**\n\n```\n<?xml version=\"1.0\"?>\n<robot xmlns:xacro=\"http://ros.org/wiki/xacro\">\n  <!-- Macro to setup dynamics plugins -->\n  <xacro:macro  name=\"wamv_gazebo_plugins\">\n    <!-- Include macros for dynamics plugins -->\n    <xacro:include filename=\"$(find wamv_gazebo)/urdf/macros.xacro\" />\n    <!-- Attach hydrodynamics plugin -->\n    <xacro:usv_dynamics_gazebo name=\"wamv_dynamics_plugin\"/>\n    <!-- Attach wind plugin -->\n    <xacro:usv_wind_gazebo name=\"wamv_wind_plugin\"/>\n  </xacro:macro>\n</robot>\n```\n\nThis way, we could decouple the thruster layouts from the base and dynamics plugins. Does it need to be in this order? Was this made to be more concise?\n\n**Current: wamv\\_gazebo.urdf.xacro \\(dynamics and base coupled with thruster confs\\)**\n\n```\n    <!-- Default WAM-V with two aft thrusters -->\n    <xacro:if value=\"${thruster_conf == 'H'}\">\n       <xacro:wamv_gazebo thruster_layout=\"$(find wamv_gazebo)/urdf/thruster_layouts/wamv_aft_thrusters.xacro\"/>\n    </xacro:if>\n\n    <!-- WAMV with \"T\" thruster configuration -->\n    <xacro:if value=\"${thruster_conf == 'T'}\">\n      <xacro:wamv_gazebo thruster_layout=\"$(find wamv_gazebo)/urdf/thruster_layouts/wamv_t_thrusters.xacro\"/>\n    </xacro:if>\n\n    <!-- WAMV with \"X\" thruster configuration -->\n    <xacro:if value=\"${thruster_conf == 'X'}\">\n      <xacro:wamv_gazebo thruster_layout=\"$(find wamv_gazebo)/urdf/thruster_layouts/wamv_x_thrusters.xacro\"/>\n    </xacro:if>\n```\n\n**Alternative: wamv\\_gazebo.urdf.xacro**\n\n```\n  <!-- Setup base separately -->\n  <xacro:include filename=\"$(find wamv_description)/urdf/wamv_base.urdf.xacro\" />\n\n  <!-- Setup plugins separately -->\n  <xacro:wamv_gazebo_plugins/>\n\n    <!-- Default WAM-V with two aft thrusters -->\n    <xacro:if value=\"${thruster_conf == 'H'}\">\n       <xacro:include filename=\"$(find wamv_gazebo)/urdf/thruster_layouts/wamv_aft_thrusters.xacro\"/>\n    </xacro:if>\n\n    <!-- WAMV with \"T\" thruster configuration -->\n    <xacro:if value=\"${thruster_conf == 'T'}\">\n      <xacro:include filename=\"$(find wamv_gazebo)/urdf/thruster_layouts/wamv_t_thrusters.xacro\"/>\n    </xacro:if>\n\n    <!-- WAMV with \"X\" thruster configuration -->\n    <xacro:if value=\"${thruster_conf == 'X'}\">\n      <xacro:include filename=\"$(find wamv_gazebo)/urdf/thruster_layouts/wamv_x_thrusters.xacro\"/>\n    </xacro:if>\n```\n\nI was just wondering because it confused me for a while and I wanted to check if this was intentional or not. Thank you!", "markup": "markdown", "html": "<p>I have a question about <code>wamv_gazebo.xacro</code>.</p>\n<p><strong>Current: wamv_gazebo.xacro</strong></p>\n<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot;?&gt;</span>\n<span class=\"nt\">&lt;robot</span> <span class=\"na\">xmlns:xacro=</span><span class=\"s\">&quot;http://ros.org/wiki/xacro&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"c\">&lt;!-- Macro to create a WAM-V with dyanmics plugins and a customizeable thruster layout --&gt;</span>\n  <span class=\"nt\">&lt;xacro:macro</span>  <span class=\"na\">name=</span><span class=\"s\">&quot;wamv_gazebo&quot;</span> <span class=\"na\">params=</span><span class=\"s\">&quot;thruster_layout&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"c\">&lt;!-- Include macros for dynamics plugins --&gt;</span>\n    <span class=\"nt\">&lt;xacro:include</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;</span><span class=\"err\">$</span><span class=\"s\">(find wamv_gazebo)/urdf/macros.xacro&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"c\">&lt;!-- Defines the base vehicle --&gt;</span>\n    <span class=\"nt\">&lt;xacro:include</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;</span><span class=\"err\">$</span><span class=\"s\">(find wamv_description)/urdf/wamv_base.urdf.xacro&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"c\">&lt;!-- Thruster Layout --&gt;</span>\n    <span class=\"nt\">&lt;xacro:include</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;</span><span class=\"cp\">${</span><span class=\"n\">thruster_layout</span><span class=\"cp\">}</span><span class=\"s\">&quot;/</span><span class=\"nt\">&gt;</span>\n    <span class=\"c\">&lt;!-- Attach hydrodynamics plugin --&gt;</span>\n    <span class=\"nt\">&lt;xacro:usv</span><span class=\"err\">_dynamics_gazebo</span> <span class=\"na\">name=</span><span class=\"s\">&quot;wamv_dynamics_plugin&quot;/</span><span class=\"nt\">&gt;</span>\n    <span class=\"c\">&lt;!-- Attach wind plugin --&gt;</span>\n    <span class=\"nt\">&lt;xacro:usv</span><span class=\"err\">_wind_gazebo</span> <span class=\"na\">name=</span><span class=\"s\">&quot;wamv_wind_plugin&quot;/</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;/xacro:macro&gt;</span>\n<span class=\"nt\">&lt;/robot&gt;</span>\n</pre></div>\n\n\n<p>Is there a reason that the <code>wamv_gazebo</code> macro is defined this way? It definitely works, but I thought that it might be cleaner to have something like</p>\n<p><strong>Alternative file idea: wamv_gazebo_plugins.xacro</strong></p>\n<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot;?&gt;</span>\n<span class=\"nt\">&lt;robot</span> <span class=\"na\">xmlns:xacro=</span><span class=\"s\">&quot;http://ros.org/wiki/xacro&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"c\">&lt;!-- Macro to setup dynamics plugins --&gt;</span>\n  <span class=\"nt\">&lt;xacro:macro</span>  <span class=\"na\">name=</span><span class=\"s\">&quot;wamv_gazebo_plugins&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"c\">&lt;!-- Include macros for dynamics plugins --&gt;</span>\n    <span class=\"nt\">&lt;xacro:include</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;$(find wamv_gazebo)/urdf/macros.xacro&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"c\">&lt;!-- Attach hydrodynamics plugin --&gt;</span>\n    <span class=\"nt\">&lt;xacro:usv_dynamics_gazebo</span> <span class=\"na\">name=</span><span class=\"s\">&quot;wamv_dynamics_plugin&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"c\">&lt;!-- Attach wind plugin --&gt;</span>\n    <span class=\"nt\">&lt;xacro:usv_wind_gazebo</span> <span class=\"na\">name=</span><span class=\"s\">&quot;wamv_wind_plugin&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;/xacro:macro&gt;</span>\n<span class=\"nt\">&lt;/robot&gt;</span>\n</pre></div>\n\n\n<p>This way, we could decouple the thruster layouts from the base and dynamics plugins. Does it need to be in this order? Was this made to be more concise?</p>\n<p><strong>Current: wamv_gazebo.urdf.xacro (dynamics and base coupled with thruster confs)</strong></p>\n<div class=\"codehilite\"><pre><span></span>    <span class=\"c\">&lt;!-- Default WAM-V with two aft thrusters --&gt;</span>\n    <span class=\"nt\">&lt;xacro:if</span> <span class=\"na\">value=</span><span class=\"s\">&quot;</span><span class=\"cp\">${</span><span class=\"n\">thruster_conf</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;H&#39;</span><span class=\"cp\">}</span><span class=\"s\">&quot;</span><span class=\"nt\">&gt;</span>\n       <span class=\"nt\">&lt;xacro:wamv</span><span class=\"err\">_gazebo</span> <span class=\"na\">thruster_layout=</span><span class=\"s\">&quot;</span><span class=\"err\">$</span><span class=\"s\">(find wamv_gazebo)/urdf/thruster_layouts/wamv_aft_thrusters.xacro&quot;/</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;/xacro:if&gt;</span>\n\n    <span class=\"c\">&lt;!-- WAMV with &quot;T&quot; thruster configuration --&gt;</span>\n    <span class=\"nt\">&lt;xacro:if</span> <span class=\"na\">value=</span><span class=\"s\">&quot;</span><span class=\"cp\">${</span><span class=\"n\">thruster_conf</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;T&#39;</span><span class=\"cp\">}</span><span class=\"s\">&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;xacro:wamv</span><span class=\"err\">_gazebo</span> <span class=\"na\">thruster_layout=</span><span class=\"s\">&quot;</span><span class=\"err\">$</span><span class=\"s\">(find wamv_gazebo)/urdf/thruster_layouts/wamv_t_thrusters.xacro&quot;/</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;/xacro:if&gt;</span>\n\n    <span class=\"c\">&lt;!-- WAMV with &quot;X&quot; thruster configuration --&gt;</span>\n    <span class=\"nt\">&lt;xacro:if</span> <span class=\"na\">value=</span><span class=\"s\">&quot;</span><span class=\"cp\">${</span><span class=\"n\">thruster_conf</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;X&#39;</span><span class=\"cp\">}</span><span class=\"s\">&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;xacro:wamv</span><span class=\"err\">_gazebo</span> <span class=\"na\">thruster_layout=</span><span class=\"s\">&quot;</span><span class=\"err\">$</span><span class=\"s\">(find wamv_gazebo)/urdf/thruster_layouts/wamv_x_thrusters.xacro&quot;/</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;/xacro:if&gt;</span>\n</pre></div>\n\n\n<p><strong>Alternative: wamv_gazebo.urdf.xacro</strong></p>\n<div class=\"codehilite\"><pre><span></span>  <span class=\"c\">&lt;!-- Setup base separately --&gt;</span>\n  <span class=\"nt\">&lt;xacro:include</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;</span><span class=\"err\">$</span><span class=\"s\">(find wamv_description)/urdf/wamv_base.urdf.xacro&quot;</span> <span class=\"nt\">/&gt;</span>\n\n  <span class=\"c\">&lt;!-- Setup plugins separately --&gt;</span>\n  <span class=\"nt\">&lt;xacro:wamv</span><span class=\"err\">_gazebo_plugins</span><span class=\"nt\">/&gt;</span>\n\n    <span class=\"c\">&lt;!-- Default WAM-V with two aft thrusters --&gt;</span>\n    <span class=\"nt\">&lt;xacro:if</span> <span class=\"na\">value=</span><span class=\"s\">&quot;</span><span class=\"cp\">${</span><span class=\"n\">thruster_conf</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;H&#39;</span><span class=\"cp\">}</span><span class=\"s\">&quot;</span><span class=\"nt\">&gt;</span>\n       <span class=\"nt\">&lt;xacro:include</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;</span><span class=\"err\">$</span><span class=\"s\">(find wamv_gazebo)/urdf/thruster_layouts/wamv_aft_thrusters.xacro&quot;/</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;/xacro:if&gt;</span>\n\n    <span class=\"c\">&lt;!-- WAMV with &quot;T&quot; thruster configuration --&gt;</span>\n    <span class=\"nt\">&lt;xacro:if</span> <span class=\"na\">value=</span><span class=\"s\">&quot;</span><span class=\"cp\">${</span><span class=\"n\">thruster_conf</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;T&#39;</span><span class=\"cp\">}</span><span class=\"s\">&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;xacro:include</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;</span><span class=\"err\">$</span><span class=\"s\">(find wamv_gazebo)/urdf/thruster_layouts/wamv_t_thrusters.xacro&quot;/</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;/xacro:if&gt;</span>\n\n    <span class=\"c\">&lt;!-- WAMV with &quot;X&quot; thruster configuration --&gt;</span>\n    <span class=\"nt\">&lt;xacro:if</span> <span class=\"na\">value=</span><span class=\"s\">&quot;</span><span class=\"cp\">${</span><span class=\"n\">thruster_conf</span> <span class=\"o\">==</span> <span class=\"s1\">&#39;X&#39;</span><span class=\"cp\">}</span><span class=\"s\">&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;xacro:include</span> <span class=\"na\">filename=</span><span class=\"s\">&quot;</span><span class=\"err\">$</span><span class=\"s\">(find wamv_gazebo)/urdf/thruster_layouts/wamv_x_thrusters.xacro&quot;/</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;/xacro:if&gt;</span>\n</pre></div>\n\n\n<p>I was just wondering because it confused me for a while and I wanted to check if this was intentional or not. Thank you!</p>", "type": "rendered"}, "created_on": "2019-06-06T03:17:00.495716+00:00", "user": {"display_name": "Tyler Lum", "uuid": "{305d9368-23ba-4f72-b1d4-7d17d2a062d8}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B305d9368-23ba-4f72-b1d4-7d17d2a062d8%7D"}, "html": {"href": "https://bitbucket.org/%7B305d9368-23ba-4f72-b1d4-7d17d2a062d8%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/5b96b66385af94340e7cabce/b8bb780f-62b7-47f8-9d03-ee65c7d17ad4/128"}}, "nickname": "tylerlum", "type": "user", "account_id": "5b96b66385af94340e7cabce"}, "updated_on": "2019-06-06T03:17:30.565215+00:00", "type": "pullrequest_comment", "id": 104704403}